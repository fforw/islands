var App=function(e){function t(t){for(var r,o,s=t[0],l=t[1],u=t[2],c=0,d=[];c<s.length;c++)o=s[c],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(f&&f(t);d.length;)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={3:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window.webpackJsonpApp=window.webpackJsonpApp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var f=l;return i.push([46,0]),n()}([,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return a.default}}),t.default=t.t_size=t.t_tile3=t.t_tile2=t.t_tile1=t.t_tile0=t.t_isEdge=t.t_n3=t.t_n2=t.t_n1=t.t_n0=t.g_size=t.g_edge5=t.g_edge4=t.g_edge3=t.g_edge2=t.g_edge1=t.g_edge0=t.g_count=t.g_isEdge=t.g_y=t.g_x=t.f_size=t.f_outmostEdge=t.f_count=t.f_y3=t.f_x3=t.f_y2=t.f_x2=t.f_y1=t.f_x1=t.f_y0=t.f_x0=void 0;var r=i(n(26)),a=i(n(24));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.f_x0=0;t.f_y0=1;t.f_x1=2;t.f_y1=3;t.f_x2=4;t.f_y2=5;t.f_x3=6;t.f_y3=7;t.f_count=8;t.f_outmostEdge=9;t.f_size=10;t.g_x=0;t.g_y=1;t.g_isEdge=2;t.g_count=3;t.g_edge0=4;t.g_edge1=5;t.g_edge2=6;t.g_edge3=7;t.g_edge4=8;t.g_edge5=9;t.g_size=10;t.t_n0=0;t.t_n1=1;t.t_n2=2;t.t_n3=3;t.t_isEdge=4;t.t_tile0=5;t.t_tile1=6;t.t_tile2=7;t.t_tile3=8;t.t_size=9;var h=2*Math.PI/6;var v={width:0,height:0,numberOfRings:5,removeEdges:50,animatedEasing:!0,renderFirstPassEdges:!1,debug:!1,weightFunction:function(e,t,n,r){var a=n-e,i=r-t;return Math.sqrt(a*a+i*i)},edgeLength:80,maxIterations:100,animating:!0,minTension:2};function m(e,t,n,r,a,i,o){for(var s=0;s<e.length;s+=10)if(s!==i){var l=e[s+8];if(e[s+0]===r&&e[s+1]===a&&e[s+2]===t&&e[s+3]===n)return o.index=s,void(o.edge=0);if(e[s+2]===r&&e[s+3]===a&&e[s+4]===t&&e[s+5]===n)return o.index=s,void(o.edge=1);if(3===l){if(e[s+4]===r&&e[s+5]===a&&e[s+0]===t&&e[s+1]===n)return o.index=s,void(o.edge=2)}else{if(e[s+4]===r&&e[s+5]===a&&e[s+6]===t&&e[s+7]===n)return o.index=s,void(o.edge=2);if(e[s+6]===r&&e[s+7]===a&&e[s+0]===t&&e[s+1]===n)return o.index=s,void(o.edge=3)}}o.index=-1}var g={index:-1,edge:0};function p(e,t){var n=e.firstPassNumEdges*e.removeEdges/100|0,r=function(e,t){for(var n=3*e.numFaces,r=new Int32Array(n),a=0,i=0;i<e.firstPassLen;i+=10){if(!(t[i+9]>=0)){var o=i<<2;r[a++]=o,r[a++]=o+1,r[a++]=o+2}}for(var s=0;s<a-2;s++){var l=s+(Math.random()*a-s-1|0),u=r[s];r[s]=r[l],r[l]=u}return r.slice(0,a)}(e,t);e.debug&&console.log("Shuffled stack",f(r.slice()));for(var a=0,i=function(e){for(var t=a;t<r.length;t++)r[t]>>>2===e&&(r[t]=-1)},o=0,s=0;s<n;s++){var l=void 0;do{if(a===r.length)return void(e.debug&&e.debug&&console.log("Ran out of removal candidates after successfully removing",o,"out of",n));l=r[a++]}while(-1===l);var u=l>>2,c=3&l;if(m(t,t[u+2*c],t[u+2*c+1],2===c?t[u+0]:t[u+2*(c+1)],2===c?t[u+1]:t[u+2*(c+1)+1],u,g),g.index>=0&&3===t[g.index+8]){var d=g.index,h=g.edge,v=0===c?t[u+4]:t[u+2*(c-1)],p=0===c?t[u+5]:t[u+2*(c-1)+1],y=t[d+9]>=0;switch(t[d+8]=4,h){case 2:t[d+6]=v,t[d+7]=p;break;case 1:t[d+6]=t[d+4],t[d+7]=t[d+5],t[d+4]=v,t[d+5]=p;break;case 0:t[d+6]=t[d+4],t[d+7]=t[d+5],t[d+4]=t[d+2],t[d+5]=t[d+3],t[d+2]=v,t[d+3]=p,y&&(t[d+9]=2)}i(d),t[u+8]=0,o++}i(u)}return e.debug&&console.log("Successfully removed",o,"out of",n),o}function y(e,t){for(var n=e.firstPassLen,r=function(e,t){for(var n=0,r=0,a=0;a<e.firstPassLen;a+=10){var i=t[a+8];3===i?n++:4===i&&r++}return 9*r+7*n}(e,t),a=new Float64Array(10*r),i=new Int32Array(9*(r/2|0)),o=0,s=0,l=function(e,t,n){e|=0,t|=0;for(var r=0;r<o;r+=10)if(Math.abs(a[r]-e)<4&&Math.abs(a[r+1]-t)<4)return n&&!a[r+2]&&(a[r+2]=1),r;var i=o;return a[o+0]=e,a[o+1]=t,a[o+2]=n?1:0,a[o+3]=0,o+=10,i},u=function(e,t,n,r){i[s+0]=e,i[s+1]=t,i[s+2]=n,i[s+3]=r,s+=9},f=function(e,t){for(var n=a[e+3],r=!1,i=0;i<n;i++){if(a[e+4+i]===t){r=!0;break}}if(!r){if(n>=6)throw new Error("At most 6 edges per node");a[e+4+n++]=t,a[e+3]=n}},c=function(e,t){f(e,t),f(t,e)},d=0;d<n;d+=10){var h=t[d+8],v=t[d+0],m=t[d+1],g=t[d+2],p=t[d+3],y=t[d+4],b=t[d+5],w=t[d+9],_=1===w,x=2===w;if(3===h){var O=(v+g)/2,j=(m+p)/2,P=(g+y)/2,M=(p+b)/2,k=(y+v)/2,z=(b+m)/2,A=(v+g+y)/3,E=(m+p+b)/3,S=l(v,m),T=l(O,j),C=l(g,p,_),I=l(P,M,_),D=l(y,b,_),L=l(k,z),F=l(A,E);c(S,T),c(T,F),c(F,L),c(L,S),c(T,C),c(C,I),c(I,F),c(F,T),c(L,F),c(F,I),c(I,D),c(D,L),u(S,T,F,L),u(T,C,I,F),u(L,F,I,D)}else if(4===h){var R=t[d+6],U=t[d+7],W=(v+g)/2,H=(m+p)/2,Z=(g+y)/2,q=(p+b)/2,J=(y+R)/2,N=(b+U)/2,X=(R+v)/2,B=(U+m)/2,G=(v+g+y+R)/4,Y=(m+p+b+U)/4,$=l(v,m),K=l(W,H),V=l(g,p,_),Q=l(Z,q,_),ee=l(y,b,_||x),te=l(J,N,x),ne=l(R,U,x),re=l(X,B),ae=l(G,Y);c($,K),c(K,V),c(V,Q),c(Q,ee),c(ee,te),c(te,ne),c(ne,re),c(re,$),c(ae,Q),c(ae,te),c(ae,re),c(ae,K),u($,K,ae,re),u(K,V,Q,ae),u(ae,Q,ee,te),u(re,ae,te,ne)}}console.log("TILES: buffer = ",i.length,", used = "+s);var ie=i.slice(0,s);return function(e,t){for(var n=t.length,r=0;r<n;r+=9){for(var a=0,i=0;i<4;i++){for(var o=t[r+0+i],s=3===i?t[r+0]:t[r+0+i+1],l=-1,u=0;u<t.length;u+=9)if(u!==r){var f=t[u+0],c=t[u+1],d=t[u+2],h=t[u+3];if(c===o&&f===s||d===o&&c===s||h===o&&d===s||f===o&&h===s){l=u,a++;break}}t[r+5+i]=l}t[r+4]=4===a?0:1}e.debug&&console.log("TILE GRAPH",t)}(e,ie),[a.slice(0,o),ie]}function b(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t.length,a=0;a<n;a++){for(var i=0,o=0;o<r;o+=10)if(!t[o+2]){for(var s=t[o+0],l=t[o+1],u=t[o+3],f=0,c=0,d=0,h=0;h<u;h++){var v=t[o+4+h],m=t[v],g=t[v+1],p=e.weightFunction(s,l,m,g);f+=m*p,c+=g*p,d+=p}var y=f/d,b=c/d,w=y-s,_=b-l;t[o+0]=y,t[o+1]=b,i+=w*w+_*_}if(i<e.minTension)return e.debug&&console.log("Reached minimal tension",e.minTension,"after",e.relaxCount,"iterations"),!0;e.relaxCount++}return e.animatedEasing||e.debug&&console.log("Stopping after max iterations = "+e.maxIterations),!1}var w=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.render=function(e){var t=n.config,r=n.graph,a=n.faces;e.save();var i=t.width/2,o=t.height/2;e.translate(i,o);r.length;if(e.fillStyle="#000",e.fillRect(-i,-o,t.width,t.height),t.renderFirstPassEdges){e.strokeStyle="#f00",e.lineWidth=1;for(var s=0;s<t.firstPassLen;s+=10){var l=a[s+8];if(l>=3){e.beginPath(),e.moveTo(a[s+0],a[s+1]);for(var u=1;u<l;u++)e.lineTo(a[s+2*u],a[s+2*u+1]);e.closePath(),e.stroke();var f=a[s+9];f>=0&&(e.strokeStyle="#fe0",e.beginPath(),e.moveTo(a[s+2*f],a[s+2*f+1]),f===l-1?e.lineTo(a[s+0],a[s+1]):e.lineTo(a[s+2*(f+1)],a[s+2*(f+1)+1]),e.stroke(),e.strokeStyle="#f00")}}}e.restore(),t.animating&&b(t,r)&&(t.animating=!1)};var i,s,u=l(l({},v),t);(i=u).numFaces=6*((s=i.numberOfRings)+1)*(s+1),i.firstPassLen=10*i.numFaces,i.firstPassNumEdges=3*i.numFaces,i.edgeLength=Math.min(i.width,i.height)/(2*i.numberOfRings+2)|0,i.animating=i.animatedEasing,i.relaxCount=0,this.config=u;var f=function(e){var t=e.numberOfRings,n=[new a.default(Math.cos(0)*e.edgeLength,Math.sin(0)*e.edgeLength),new a.default(Math.cos(h)*e.edgeLength,Math.sin(h)*e.edgeLength),new a.default(Math.cos(2*h)*e.edgeLength,Math.sin(2*h)*e.edgeLength),new a.default(Math.cos(3*h)*e.edgeLength,Math.sin(3*h)*e.edgeLength),new a.default(Math.cos(4*h)*e.edgeLength,Math.sin(4*h)*e.edgeLength),new a.default(Math.cos(5*h)*e.edgeLength,Math.sin(5*h)*e.edgeLength)],r=new Float64Array(e.firstPassLen),i=0,o=0,s=1;do{for(var l=0;l<6;l++)for(var u=n[l],f=n[(l+1)%6],c=n[(l+2)%6],d=u.copy().scale(o),v=0;v<s;v++)if(1&v)r[i+0]=0|d.x,r[i+1]=0|d.y,r[i+2]=d.x+f.x|0,r[i+3]=d.y+f.y|0,r[i+4]=d.x+c.x|0,r[i+5]=d.y+c.y|0,r[i+8]=3,r[i+9]=-1,i+=10,d.add(c);else{var m=o===t;r[i+0]=0|d.x,r[i+1]=0|d.y,r[i+2]=d.x+u.x|0,r[i+3]=d.y+u.y|0,r[i+4]=d.x+f.x|0,r[i+5]=d.y+f.y|0,r[i+8]=3,r[i+9]=m?1:-1,i+=10}s+=2}while(o++<t);return r}(u);u.renderFirstPassEdges&&(this.faces="merged"!==u.renderFirstPassEdges?f.slice():f);var c=u.debug&&(0,r.default)();p(u,f),u.debug&&console.log("Edge removal in ",(0,r.default)()-c,"ms");var d=o(y(u,f),2),m=d[0],g=d[1];this.tiles=g,u.animating||b(u,m,u.maxIterations),this.graph=m};t.default=w},function(e,t,n){"use strict";var r,a;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"l",(function(){return o})),n.d(t,"h",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"i",(function(){return f})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"k",(function(){return h})),n.d(t,"f",(function(){return v})),n.d(t,"a",(function(){return m})),n.d(t,"j",(function(){return g})),n.d(t,"g",(function(){return p}));var o=0,s=1,l=2,u=3,f=4,c=5,d=6,h=8,v=["Water","Sand","Grass","Forest","Stone","Ice","Dirt","Packed_Ice"],m=[null,"case-1","case-2","case-3","case-4","case-5-1","case-6","case-7","case-8","case-9","case-10-1","case-11","case-12","case-13","case-14","case-15","case-m1","case-m2","case-m3","case-m4","case-5-2","case-10-2"],g=(i(r={},o,[0,.4,.8]),i(r,s,[.8,.8,0]),i(r,l,[0,.7,0]),i(r,d,[.5,.3,.1]),i(r,u,[.2,.5,.3]),i(r,f,[.5,.5,.5]),i(r,c,[1,1,1]),i(r,7,[1,1,1]),i(r,h,[1,0,1]),i(a={},o,0),i(a,s,1),i(a,l,1),i(a,d,1),i(a,u,1),i(a,f,.4),i(a,c,.9),i(a,7,.8),i(a,h,0),2*Math.PI),p=(1+Math.sqrt(5))/2},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l}));var r=n(0),a=n(2);n(8);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=1,s=a.b,l=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=n,this.size=t,this.data=new Float64Array(t*t*s);var l=new Float64Array(2*s);this.offsets=l;var u=-t*o/2,f=-t*o/2,c=0,d=t*o,h=0,v=1,m=v,g=!1,p=new r.q;p.name="MaterialGrid";for(var y=0;y<s;y++){if(l[h++]=u,l[h++]=f,n){var b=new r.W(o*t,o*t,1,1),w=i[y].clone();w.side=r.l;var _=new r.J(b,w);_.name="M"+y,_.position.set(u,f,0),p.add(_)}if(u+=c,f+=d,0==--m){var x=c;c=-d,d=x,g&&v++,g=!g,m=v}}p.rotation.x=a.j/4,n&&(this.group=p,n.add(p))}var t,n,l;return t=e,(n=[{key:"setTile",value:function(e,t,n,r,a){for(var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=this.size,s=r.sizeX,l=r.sizeZ,c=2*a,d=t+u[c]*(s-1),h=n+u[c+1]*(l-1),v=f[c],m=f[c+1],g=e*o*o,p=!i,y=!p&&new Uint32Array(s*l),b=-v*s-m,w=-m*l+v,_=0,x=0;x<l;x++){for(var O=0;O<s;O++){var j=g+d+h*o,P=r.pattern[x*s+O];p?this.data[j]===P&&(this.data[j]=0):(0!==this.data[j]&&"function"==typeof i&&i(j),y[_++]=j,this.data[j]=P),d+=v,h+=m}d+=b,h+=w}return y}},{key:"clearTile",value:function(e){this.setTile(e.material,e.x,e.y,e.tile,e.rotation,null)}}])&&i(t.prototype,n),l&&i(t,l),e}(),u=[0,0,1,0,1,1,0,1],f=[1,0,0,1,-1,0,0,-1]},,function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(9),a=n(11);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return e[e.length-1].id+e[e.length-1].idCount}function u(){var e=document.createElement("canvas");e.width=f,e.height=c;var t=e.getContext("2d");t.lineWidth=4,t.strokeStyle="rgba(255,64,64,0.5)",t.fillStyle="#fff";var n=.5*f,r=.5*c,a=.3*Math.min(r,n);return t.beginPath(),t.moveTo(-a+n,-a+r),t.lineTo(a+n,a+r),t.moveTo(a+n,-a+r),t.lineTo(-a+n,a+r),t.rect(0,0,f,c),t.stroke(),t.fillText("None",4,c-4),e}var f=40,c=f/.75;function d(e){var t=[],n=0;for(var i in r.a)r.a.hasOwnProperty(i)&&function(){var a=r.a[i],s=a.variants,l=a.sizeX,u=void 0===l?1:l,f=a.sizeY,c=void 0===f?1:f,d=a.sizeZ,h=void 0===d?1:d;t[n]=o(o({},a),{},{id:-1,idCount:a.idCount||1,name:i,sizeX:u,sizeY:c,sizeZ:h,reachable:a.reachable||!1,pattern:a.pattern?a.pattern.slice():null,variants:e?e.scene.children.filter((function(e){return s.indexOf(e.name)>=0})):s,thumbnail:null}),n++}();t.sort((function(e,t){return e.name===t.name?0:e.name<t.name?-1:1}));var s=1;if(t.forEach((function(e){var t=e.name,n=e.idCount,r=e.pattern,a=e.sizeX,i=e.sizeZ;if(e.id=s,s+=n,n>1){if(!r||!Array.isArray(r))throw new Error("Tile '"+t+"': tiles with idCount > 1 must define a pattern");var o=a*i;if(r.length!==o)throw new Error("Tile '"+t+"': Pattern must be "+a+" x "+i+" = "+o+" elements long: "+r);for(var l=0;l<r.length;l++)r[l]+=e.id}else e.pattern=[e.id]})),e){var l=[],d=[];return t.forEach((function(e,t){l[t]=e.name,d[t]=e.variants[0]})),Object(a.a)(d,f,c,l).then((function(e){return e.forEach((function(e,n){return t[n].thumbnail=e})),t.unshift({id:0,idCount:1,name:"empty",variants:[],sizeX:1,sizeY:.1,sizeZ:1,thumbnail:u(),pattern:[0]}),t}))}return t.unshift({id:0,idCount:1,name:"empty",variants:[],sizeX:1,sizeY:.1,sizeZ:1,reachable:!1,colors:["#000"],thumbnail:null}),t}},function(e,t,n){"use strict";var r=new(n(16).a);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,a){r.load(e,n,t,a)}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var r,a=n(4),i=n(13),o=(n(2),n(6));function s(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=r.name,i=r.id,o=r.idCount;if(t===i)return a;if(t>i&&t<i+o)return a+"-"+(t-i+1)}return"ERR:"+t}function l(e,t,n,s){var l=Object(o.b)(n),u=l+31>>5;(!r||r.length<u)&&(r=new Uint32Array(u));var f=new a.b(t);Object(i.a)(e,n,f);for(var c=0,d=t-1,h=function(e,t,n,r){var a=r>>5,i=1<<r-(a<<5),o=t*v*u+n*u+a,s=e[o],l=s|i;s!==l&&(e[o]=l)},v=l+1,m=a.c*v,g=new Uint32Array(m),p=a.c*v*u,y=new Uint32Array(p),b=0;b<a.c;b++)for(var w=0;w<t;w++)for(var _=0;_<t;_++){var x=f.data[c];0!==x&&g[b*v+1+x]++;var O=0===w?0:f.data[c-t],j=_===d?0:f.data[c+1],P=w===d?0:f.data[c+t],M=0===_?0:f.data[c-1];h(y,b,x,O),h(y,b,x,j),h(y,b,x,P),h(y,b,x,M),c++}c=0;for(var k=0;k<a.c;k++){r.fill(0);for(var z=0,A=0;A<l;A++){var E=g[c+1+A];if(E>0||0===A){z+=E;var S=A>>5,T=1<<A-(S<<5);r[S]|=T}}var C=k*v*u+l*u;if(0===z)g[c+1]=1,g[c]=1,r[0]|=1;else{var I=z*(s[k]/(1-s[k]));g[c+1]=I,g[c]=z+I}y.set(r,C),c+=v}return{weights:g,adjacencies:y}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(0);var r={cactus:{variants:["cactus_short","cactus_tall"],colors:["#0c0"]},flower:{variants:["flower_purpleA","flower_purpleB","flower_purpleC","flower_redA","flower_redB","flower_redC","flower_yellowA","flower_yellowB","flower_yellowC"],colors:["#ff0"]},stone_large:{variants:["stone_largeD","stone_largeE","stone_largeF"],colors:["#eee"]},stone_small:{variants:["stone_smallD"],colors:["#888"]},palm_tree:{variants:["tree_palmDetailedTall","tree_palmShort","tree_palmTall"],colors:["#8c0"]},pine:{variants:["tree_pineRoundD","tree_pineTallC_detailed","tree_pineTallD"],colors:["#480"]},tree_plateau:{variants:["tree_plateau"],colors:["#482"]},tree_tall_dark:{variants:["tree_tall_dark"],colors:["#360"]},tree_thin:{variants:["tree_thin"],colors:["#684"]},house:{variants:["House"],sizeX:3,sizeY:2,sizeZ:3,reachable:!0,colors:["#f00","#00f"],idCount:2,pattern:[1,1,1,1,0,1,1,1,1]}}},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(e,t,n,a){return new Promise((function(i){var o=document.createElement("div");document.body.appendChild(o),o.style.position="absolute",o.style.top="0px",o.style.left="-10000px";var s=new r.Ab({alpha:!0});s.setPixelRatio(window.devicePixelRatio),s.setSize(t,n),o.appendChild(s.domElement);var l=new r.hb,u=new r.U(55,t/n,.1,100),f=new r.k("#fff8d5",1.4);f.position.set(0,3,-1.5),l.add(f);for(var c,d=[],h=0;h<e.length;h++){c&&l.remove(c),c=e[h].clone();var v=new r.d;v.expandByObject(c);var m=Math.max(v.max.x-v.min.x,v.max.y-v.min.y),g=m<1.5,p=g?1.2*Math.pow(m,.9):1.5*m;u.up.set(0,1,0),u.position.set(0,v.max.y*(g?1.1:.9),-p),u.lookAt(new r.wb(0,(v.max.y+v.min.y)/(g?2:4),0)),u.updateProjectionMatrix(),c.position.set(0,0,0),l.add(c),s.render(l,u);var y=document.createElement("canvas");y.width=t,y.height=n;var b=y.getContext("2d");b.drawImage(s.domElement,0,0),b.strokeStyle="rgba(255,255,255,0.4)",b.fillStyle="#fff",b.lineWidth=2,b.beginPath(),b.rect(0,0,t,n),b.stroke();var w=a?a[h]:c.name;b.fillText(w,4,n-4),d.push(y)}i(d),l.dispose(),s.dispose(),document.body.removeChild(o)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),a=(n(0),n(2));function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=0,s=function(){function e(t,n,r,a,i,s,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=void 0,this.tile=void 0,this.position=void 0,this.object=null,this.indexes=null,this.id=++o,this.scene=t,this.tile=n,this.position=r.clone(),this.rotation=a,this.material=i,this.x=s,this.y=l,t&&this.createObject()}var t,n,s;return t=e,(n=[{key:"createObject",value:function(){var e=this.tile,t=this.scene,n=this.position,i=this.rotation,o=e.variants;this.variant=Math.random()*o.length|0;var s=o[this.variant].clone();s.scale.set(r.a,r.a,r.a),s.position.copy(n),s.rotation.y=a.j*i/4,this.object=s,t.add(s)}},{key:"removeObject",value:function(){var e=this.scene,t=this.object;t&&(e.remove(t),this.object=null)}}])&&i(t.prototype,n),s&&i(t,s),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(12),a=n(0);function i(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.name===t)return r}return null}function o(e,t,n,o,s){for(var l=e.instances,u=new Set,f=0;f<l.length;f++){var c=l[f],d=i(t,c.name);if(d){var h=new r.a(s,d,new a.wb(c.position[0],c.position[1],c.position[2]),4*Math.random()|0,c.material,c.x,c.y);h.variant=Math.random()*d.variants.length|0,h.indexes=n.setTile(h.material,h.x,h.y,h.tile,h.rotation,!0),o&&o.add(h)}else u.add(c.name)}u.size>0&&console.log("Could not find some tiles: ",u)}},,function(e){e.exports=JSON.parse('{"version":1,"timestamp":"2020-06-13T16:10:38.427Z","instances":[{"name":"stone_small","position":[-1.5,0,3.5],"material":1,"x":10,"y":3},{"name":"stone_small","position":[-18.5,0,-18.5],"material":4,"x":5,"y":5},{"name":"stone_small","position":[-18.5,0,-17.5],"material":4,"x":5,"y":6},{"name":"stone_large","position":[-20.5,0,-19.5],"material":4,"x":3,"y":4},{"name":"stone_large","position":[-20.5,0,-18.5],"material":4,"x":3,"y":5},{"name":"cactus","position":[-3.5,0,7.5],"material":1,"x":8,"y":7},{"name":"tree_thin","position":[-18.5,0,-7.5],"material":3,"x":5,"y":4},{"name":"tree_thin","position":[-18.5,0,-6.5],"material":3,"x":5,"y":5},{"name":"tree_tall_dark","position":[-19.5,0,-7.5],"material":3,"x":4,"y":4},{"name":"tree_tall_dark","position":[-19.5,0,-6.5],"material":3,"x":4,"y":5},{"name":"pine","position":[-18.5,0,-5.5],"material":3,"x":5,"y":6},{"name":"pine","position":[-19.5,0,-5.5],"material":3,"x":4,"y":6},{"name":"tree_plateau","position":[-19.5,0,-8.5],"material":3,"x":4,"y":3},{"name":"tree_plateau","position":[-18.5,0,-8.5],"material":3,"x":5,"y":3},{"name":"tree_plateau","position":[-18.5,0,-4.5],"material":3,"x":5,"y":7},{"name":"tree_plateau","position":[-19.5,0,-4.5],"material":3,"x":4,"y":7},{"name":"flower","position":[-14.5,0,1.5],"material":2,"x":9,"y":1},{"name":"flower","position":[-14.5,0,2.5],"material":2,"x":9,"y":2},{"name":"tree_plateau","position":[-20.5,0,5.5],"material":2,"x":3,"y":5},{"name":"tree_thin","position":[-20.5,0,1.5],"material":2,"x":3,"y":1},{"name":"stone_small","position":[-13.5,0,-4.5],"material":3,"x":10,"y":7},{"name":"stone_large","position":[-21.5,0,8.5],"material":2,"x":2,"y":8},{"name":"pine","position":[-19.5,0,-15.5],"material":4,"x":4,"y":8},{"name":"flower","position":[-18.5,0,-3.5],"material":3,"x":5,"y":8},{"name":"flower","position":[-20.5,0,-5.5],"material":3,"x":3,"y":6},{"name":"flower","position":[-20.5,0,-7.5],"material":3,"x":3,"y":4},{"name":"flower","position":[-19.5,0,-9.5],"material":3,"x":4,"y":2},{"name":"flower","position":[-17.5,0,-7.5],"material":3,"x":6,"y":4},{"name":"stone_small","position":[-20.5,0,-4.5],"material":3,"x":3,"y":7},{"name":"stone_small","position":[-20.5,0,-6.5],"material":3,"x":3,"y":5},{"name":"stone_small","position":[-20.5,0,-8.5],"material":3,"x":3,"y":3},{"name":"stone_small","position":[-18.5,0,-9.5],"material":3,"x":5,"y":2},{"name":"stone_small","position":[-17.5,0,-6.5],"material":3,"x":6,"y":5},{"name":"stone_small","position":[-17.5,0,-5.5],"material":3,"x":6,"y":6},{"name":"tree_tall_dark","position":[-23.5,0,-10.5],"material":3,"x":0,"y":1},{"name":"tree_thin","position":[-23.5,0,-8.5],"material":3,"x":0,"y":3},{"name":"tree_plateau","position":[-23.5,0,-6.5],"material":3,"x":0,"y":5},{"name":"pine","position":[-23.5,0,-4.5],"material":3,"x":0,"y":7},{"name":"palm_tree","position":[-7.5,0,5.5],"material":1,"x":4,"y":5},{"name":"house","position":[-20.5,0,3.5],"material":2,"x":2,"y":2},{"name":"house","position":[-15.5,0,6.5],"material":2,"x":7,"y":5},{"name":"flower","position":[-14.5,0,10.5],"material":2,"x":9,"y":10},{"name":"flower","position":[-14.5,0,9.5],"material":2,"x":9,"y":9},{"name":"stone_small","position":[-22.5,0,3.5],"material":2,"x":1,"y":3},{"name":"cactus","position":[-11.5,0,4.5],"material":1,"x":0,"y":4},{"name":"pine","position":[-21.5,0,-2.5],"material":3,"x":2,"y":9},{"name":"pine","position":[-20.5,0,-2.5],"material":3,"x":3,"y":9},{"name":"flower","position":[-16.5,0,10.5],"material":2,"x":7,"y":10},{"name":"flower","position":[-16.5,0,9.5],"material":2,"x":7,"y":9},{"name":"flower","position":[-17.5,0,6.5],"material":2,"x":6,"y":6},{"name":"flower","position":[-17.5,0,5.5],"material":2,"x":6,"y":5},{"name":"flower","position":[-16.5,0,1.5],"material":2,"x":7,"y":1},{"name":"flower","position":[-17.5,0,1.5],"material":2,"x":6,"y":1},{"name":"flower","position":[-18.5,0,10.5],"material":2,"x":5,"y":10},{"name":"flower","position":[-18.5,0,9.5],"material":2,"x":5,"y":9}]}')},,function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=.05,r=n*n,a=t?.4:.6,i=t?.75:.5;if(e<n)return r-(e=n-e)*e;if(e<a){var o=a-n;return r+(e-=n)*e*(i-r)/(o*o)}var s=1-a;return 1-(e=1-e)*e*e*(1-i)/(s*s*s)}n.d(t,"a",(function(){return r}))},,,,,,,function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=Math.sqrt,i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n}var t,n,i;return t=e,(n=[{key:"copy",value:function(){return new e(this.x,this.y)}},{key:"add",value:function(e,t){return"number"==typeof e?(this.x+=e,this.y+=t):(this.x+=e.x,this.y+=e.y),this}},{key:"subtract",value:function(e,t){return"number"==typeof e?(this.x-=e,this.y-=t):(this.x-=e.x,this.y-=e.y),this}},{key:"scale",value:function(e){return this.x*=e,this.y*=e,this}},{key:"length",value:function(){var e=this.x,t=this.y;return a(e*e+t*t)}},{key:"norm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.scale(e/this.length())}},{key:"rotateClockwise",value:function(){var e=this.x,t=this.y;return this.x=t,this.y=-e,this}},{key:"rotateCounterClockwise",value:function(){var e=this.x,t=this.y;return this.x=-t,this.y=e,this}},{key:"set",value:function(e,t){"number"==typeof e?(this.x=e,this.y=t):(this.x=e.x,this.y=e.y)}}])&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"td_cx",(function(){return N})),n.d(t,"td_cy",(function(){return X})),n.d(t,"td_walkable",(function(){return B})),n.d(t,"td_cut0",(function(){return G})),n.d(t,"td_cut1",(function(){return Y})),n.d(t,"td_cut2",(function(){return $})),n.d(t,"td_cut3",(function(){return K})),n.d(t,"td_tileId",(function(){return V})),n.d(t,"td_entropy",(function(){return Q})),n.d(t,"td_collapsed",(function(){return ee})),n.d(t,"td_ground",(function(){return te})),n.d(t,"td_bitmask",(function(){return ne})),n.d(t,"td_size",(function(){return re})),n.d(t,"h_height",(function(){return fe})),n.d(t,"h_ground",(function(){return ce})),n.d(t,"h_cuts",(function(){return de})),n.d(t,"h_size",(function(){return he}));var r=n(14),a=n.n(r),i=n(28),o=n(29),s=n.n(o),l=(n(10),n(0)),u=n(1),f=n.n(u),c=n(7),d=(n(30),n(18)),h=n(21),v=(n(34),new l.qb),m=n(17),g=n(2),p=n(6),y=n(8),b=n(4);var w=n(15);var _,x,O=[1,.8,.3,.1,.6,1,1,1];var j,P,M=new Uint8Array(b.c);function k(e,t,n,r,a,i){for(var o=a+1,s=0,l=0,u=0;u<r;u++)for(var f=e[t+ne+u],c=1,d=0;c;){if(f&c){var h=i*o+1+d;s+=n[h],l+=x[h]}c<<=1,d++}return Math.log2(s)-l/s}function z(e,t,n,r){var a=e.tiles,i=Object(p.b)(r),o=i+31>>5,s=i+1,l=u.t_size/re,f=re/u.t_size;_||(_=Object(y.a)(w,12,r,O),x=function(e,t){for(var n=Object(p.b)(e),r=n+1,a=new Float64Array(t),i=0;i<b.c;i++)for(var o=i*r+1,s=0;s<n;s++){var l=t[o+s];l>0&&(a[o+s]=Math.log2(l)*l)}return a}(r,_.weights),P=function(e,t){for(var n=new Uint8Array(e),r=0;r<t.length;r++){var a=t[r],i=a.id,o=a.idCount;if(a.reachable)for(var s=0;s<o;s++)n[i+s]=1}return n}(i,r));var c=_,d=c.weights,h=c.adjacencies;!function(e,t,n,r){var a=_,i=a.weights,o=a.adjacencies,s=he/u.g_size,l=re/u.t_size,f=Object(p.b)(r),c=f+31>>5,d=f+1;if(ne+c>re)throw new Error("more td_bitmaskN values needed");j||(j=new Uint32Array(c));for(var h=M.length,v=0,m=0;m<e.length;m+=u.t_size){var y=e[m+u.t_n0]*s,b=e[m+u.t_n1]*s,w=e[m+u.t_n2]*s,x=e[m+u.t_n3]*s;M.fill(0),M[t[y+ce]]++,M[t[b+ce]]++,M[t[w+ce]]++,M[t[x+ce]]++;for(var O=0,P=-1,z=0;z<h;z++){M[z]>O&&(O=M[z],P=z)}if(n[v+te]=P,P===g.e||P===g.l)n[v+V]=0,n[v+ee]=1;else{for(var A=!1,E=0;E<4;E++){var S=e[m+u.t_tile0+E];if(S>=0)if(n[S*l+ee]){A=!0;break}}for(var T=P*d*c,C=P*d*c+f*c,I=0;I<c;I++)n[v+ne+I]=A?o[T+I]:o[C+I];n[v+Q]=k(n,v,i,c,f,P)}v+=re}}(a,t,n,r);var v,m,z,A=!1,E=a.length/u.t_size,S=[],T=[];do{v=0;for(var C=1/0,I=0;I<n.length;I+=re)if(!n[I+ee]){var D=n[I+Q];D<C?(C=D,S[0]=I,v=1):D===C&&(S[v++]=I)}if(C===1/0)return;var L=void 0,F=null,R=0,U=n[(L=1===v?S[0]:S[Math.random()*v|0])+te];m=0,z=0;for(var W=0;W<o;W++)for(var H=n[L+ne+W],Z=1;Z;){if(H&Z&&(n[L+B]||!P[R])){var q=d[U*s+1+R];T[m++]=q,T[m++]=R,z+=q}Z<<=1,R++}if(1===m)F=T[1];else for(var J=Math.random()*z|0,N=0;N<m;N+=2){var X=T[N],G=T[N+1];if((J-=X)<=0){F=G;break}}n[L+V]=F,n[L+ee]=1,A=!0,E--;for(var Y=L*l,$=0;$<4;$++){var K=a[Y+u.t_tile0+$];if(!(K<0)){var ae=K*f;if(!n[ae+ee]){for(var ie=n[ae+te],oe=!0,se=0;se<4;se++){var le=a[K+u.t_tile0+se];if(!(le<0)){var ue=le*f,fe=n[ue+ee],de=n[ue+V];if(fe&&-1!==de){var ve=de>>5,me=1<<de-(ve<<5);if(!(h[ie*s+i+ve]&me))continue;for(var ge=0;ge<o;ge++){var pe=h[ie*s+de+ge];oe?n[ue+ne+ge]=pe:n[ae+ne+ge]&=pe}oe=!1}}}for(var ye=!0,be=0;be<o;be++)if(n[ae+ne+be]){ye=!1;break}ye?(n[ae+V]=0,n[ae+ee]=1):n[ae+Q]=k(n,ae,d,o,i,ie)}}}}while(A&&E>0)}var A=/^(#)?([0-9a-f]+)$/i;function E(e){var t;if("string"!=typeof e||!(t=A.exec(e)))return null;var n=t[2];return 3===n.length?{r:parseInt(n[0],16)/15,g:parseInt(n[1],16)/15,b:parseInt(n[2],16)/15}:6===n.length?{r:parseInt(n.substring(0,2),16)/255,g:parseInt(n.substring(2,4),16)/255,b:parseInt(n.substring(4,6),16)/255}:null}function S(e){var t=E(e);if(!t)throw new Error("Invalid color "+e);return t}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D,L,F,R,U,W,H,Z,q,J,N=0,X=1,B=2,G=3,Y=4,$=5,K=6,V=7,Q=8,ee=9,te=10,ne=11,re=12;var ae=10*Math.random(),ie=10*Math.random();function oe(e,t){var n=Math.sqrt(e*e+t*t),r=pe.noise2D(7e-4*e,ie+7e-4*t)<.1?0:.6,a=Object(m.a)(1-n/750,r);return Math.max(0,(75+75*(.99*pe.noise2D(ae+.003*e,.003*t)+pe.noise2D(.07*t,.07*e)*(1-.99)+r))*a)}var se=new Float64Array(5);function le(){for(var e=J,t=(e.graph,e.tiles),n=t.length,r=re/u.t_size,a=[],i=new Set,o=0;o<n;o+=u.t_size){var s=o*r,l=t[o+u.t_tile0]*r,f=t[o+u.t_tile1]*r,c=t[o+u.t_tile2]*r,d=t[o+u.t_tile3]*r;se[0]=oe(Z[s],Z[s+1]),se[1]=l>=0?oe(Z[l+N],Z[l+X]):-1,se[2]=f>=0?oe(Z[f+N],Z[f+X]):-1,se[3]=c>=0?oe(Z[c+N],Z[c+X]):-1,se[4]=d>=0?oe(Z[d+N],Z[d+X]):-1;var h=0;if(l>=0&&Math.abs(se[0]-se[1])>10&&(h|=1),f>=0&&Math.abs(se[0]-se[2])>10&&(h|=2),c>=0&&Math.abs(se[0]-se[3])>10&&(h|=4),d>=0&&Math.abs(se[0]-se[4])>10&&(h|=8),0!==h){for(var v=0;v<4;v++)if(h&1<<v){var m=v,p=3===v?0:v+1,y=t[o+u.t_n0+m]*Me,b=t[o+u.t_n0+p]*Me,w=se[0],_=t[o+u.t_n0+m],x=t[o+u.t_n0+p];i.add(_),i.add(x),Z[s+G+m]=w,Z[s+G+p]=w;var O=Math.random();O<.2?q[y+ce]=g.i:O<.4&&(q[b+ce]=g.i);var j=t[o+u.t_tile0+v];t[o+u.t_tile0+v]=-1;for(var P=-1,M=0;M<4;M++)if(t[j+u.t_tile0+M]===o&&-1===Z[j*r+G+M]){P=o;break}-1!==P&&a.push(0,o,j,m,p)}for(var k=0;k<4;k++)if(!(h&1<<k)){var z=3===k?0:k+1,A=h&1<<(0===k?3:k-1),E=h&1<<z,S=t[o+u.t_tile0+k];(A||E)&&(A&&E?a.push(0,o,S,k,z):A?a.push(2,o,S,k,z):a.push(1,o,S,k,z))}}}var T,I=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=C(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw a}}}}(i);try{for(I.s();!(T=I.n()).done;)for(var D=T.value,L=0;L<n;L+=u.t_size)for(var F=0;F<4;F++){if(t[L+u.t_n0+F]===D){var R=L*r;-1===Z[R+G+F]&&(Z[R+G+F]=oe(Z[R+N],Z[R+X]))}}}catch(e){I.e(e)}finally{I.f()}return a}var ue,fe=0,ce=1,de=2,he=3;function ve(){var e=J=new f.a({numberOfRings:15,width:1500,height:1500,graphUserData:1}),t=e.graph,n=(e.tiles,e.config,t.length),r=he/u.g_size;q=new Float64Array(n*r);for(var a=0,i=0;i<n;i+=u.g_size)q[a+fe]=oe(t[i+u.g_x],t[i+u.g_y]),q[a+ce]=g.k,a+=he;Z=new Float64Array(J.tiles.length/u.t_size*re),function(){for(var e=J,t=e.graph,n=e.tiles,r=n.length,a=0,i=0;i<r;i+=u.t_size){var o=n[i+u.t_n0],s=n[i+u.t_n1],l=n[i+u.t_n2],f=n[i+u.t_n3];Z[a+N]=(t[o+u.g_x]+t[s+u.g_x]+t[l+u.g_x]+t[f+u.g_x])/4,Z[a+X]=(t[o+u.g_y]+t[s+u.g_y]+t[l+u.g_y]+t[f+u.g_y])/4,Z[a+B]=0,Z[a+G]=-1,Z[a+Y]=-1,Z[a+$]=-1,Z[a+K]=-1,a+=re}}(),ue=le(),console.log({tileCuts:Ae(ue,5)}),function(){var e=function(){for(var e=J.tiles,t=e.length,n=0;n<t;n+=u.t_size)if(e[n+u.t_isEdge])return n;throw new Error("No edge!?")}();console.log("Starting to walk at #",e/u.t_size);var t=new Set;!function e(t,n){if(t>=0&&!n.has(t)){n.add(t);var r=J.tiles;Z[t*me+B]=1,e(r[t+u.t_tile0],n),e(r[t+u.t_tile1],n),e(r[t+u.t_tile2],n),e(r[t+u.t_tile3],n)}}(e,t)}(),function(){for(var e=J.graph,t=e.length,n=0,r=0,a=0;a<t;a+=u.g_size){var i=e[r+u.g_x],o=q[n+fe],s=e[r+u.g_y];if(q[n+ce]===g.k)if(o<2)q[n+ce]=g.l;else if(o<5.7)q[n+ce]=g.h;else{var l=pe.noise2D(.005*i,.005*s);q[n+ce]=o<60?l<.2?g.d:g.c:l<.2?g.c:g.d}n+=he,r+=u.g_size}}()}var me=re/u.t_size;var ge=new i.a("TEST"),pe=new s.a((function(){return ge.next()}));var ye=S("#f0f");var be,we,_e=1e3,xe=.1,Oe=.1;function je(){if(we){var e=Math.PI*(xe-.5),t=2*Math.PI*(Oe-.5);U.position.x=_e*Math.cos(t),U.position.y=_e*Math.sin(t)*Math.sin(e),U.position.z=_e*Math.sin(t)*Math.cos(e),we.material.uniforms.sunPosition.value=U.position.copy(U.position),H&&H.material.uniforms.sunDirection.value.copy(U.position).normalize(),be.update(R,we)}}function Pe(){ve(),D=document.getElementById("container"),(R=new l.Ab).setPixelRatio(window.devicePixelRatio),R.setSize(window.innerWidth,window.innerHeight),R.outputEncoding=l.Bb,D.appendChild(R.domElement),F=new l.hb,(L=new l.U(55,window.innerWidth/window.innerHeight,1,2e4)).position.set(250,250,1e3),U=new l.k("#fff8d5",.8),F.add(U),be=new l.j(.2,1,512),F.background=be.renderTarget;var e=new l.W(3e4,3e4),t=new l.M({side:l.p,color:"#00232a",envMap:be.renderTarget.texture,roughness:.2});new l.J(e,t).rotation.x=-Math.PI/2,we=new d.a,be.renderTarget.texture,je(),(W=new h.a(L,R.domElement)).maxPolarAngle=Math.PI,W.target.set(0,0,0),W.minDistance=0,W.maxDistance=1500,W.enableDamping=!0,W.dampingFactor=.02,W.update(),window.addEventListener("resize",ke,!1);var n=Object(p.a)(null);z(J,q,Z,n),function(e){var t=new l.g;t.name="Landscape-Debug";var n=[],r=[],a=[],i=[],o=J,s=o.graph,f=o.tiles,c=f.length;console.log("Height map for ",c/u.t_size," tiles");for(var d=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=r.id,i=r.idCount,o=r.colors;if(t>=a&&t<a+i)return S(o[t-a])}return console.log("No color for ",Object(y.b)(e,t)),ye},h=0,v=0;v<c;v+=u.t_size){var m=f[v+u.t_n0],p=f[v+u.t_n1],b=f[v+u.t_n2],w=f[v+u.t_n3],_=m*Me,x=p*Me,O=b*Me,j=w*Me,P=s[m+u.g_x],M=-1===Z[h+G]?q[_+fe]:Z[h+G],k=s[m+u.g_y],z=s[p+u.g_x],A=-1===Z[h+Y]?q[x+fe]:Z[h+Y],E=s[p+u.g_y],T=s[b+u.g_x],C=-1===Z[h+$]?q[O+fe]:Z[h+$],I=s[b+u.g_y],D=s[w+u.g_x],L=-1===Z[h+K]?q[j+fe]:Z[h+K],R=s[w+u.g_y],U=P-z,W=M-A,H=k-E,N=T-z,X=C-A,B=I-E,Q=D-z,ee=L-A,te=R-E,ne=(W*B-H*X+(W*te-H*ee))/2,ae=(H*N-U*B+(H*Q-U*te))/2,ie=(U*X-W*N+(U*ee-W*Q))/2,oe=1/Math.sqrt(ne*ne+ae*ae+ie*ie);ne*=oe,ae*=oe,ie*=oe;var se=q[_+ce],le=q[x+ce],ue=q[O+ce],de=q[j+ce];if(se!==g.l||le!==g.l||ue!==g.l||de!==g.l){n.push(P,M,k),n.push(D,L,R),n.push(z,A,E),n.push(z,A,E),n.push(D,L,R),n.push(T,C,I),r.push(ne,ae,ie),r.push(ne,ae,ie),r.push(ne,ae,ie),r.push(ne,ae,ie),r.push(ne,ae,ie),r.push(ne,ae,ie);var he=d(e,Z[h+V]);a.push(he.r,he.g,he.b),a.push(he.r,he.g,he.b),a.push(he.r,he.g,he.b),a.push(he.r,he.g,he.b),a.push(he.r,he.g,he.b),a.push(he.r,he.g,he.b)}h+=re}t.setAttribute("position",new l.o(n,3)),t.setAttribute("normal",new l.o(r,3)),t.setAttribute("color",new l.o(a,3));var ve=new l.M({vertexColors:!0,side:l.l,roughness:.5}),me=new l.J(t,ve);if(me.position.set(0,-2,0),F.add(me),i.length>0){var ge=new l.g;ge.setAttribute("position",new l.f(new Float32Array(i),3,!1)),ge.setAttribute("normal",new l.f(new Float32Array([]),3,!1));var pe=new l.J(ge,new l.K({color:new l.i("#f0f"),depthTest:!1}));F.add(pe)}}(n)}new l.S;var Me=he/u.g_size;new l.wb,new l.wb,new l.wb,new l.wb,new l.wb,new l.wb,new l.wb,new l.wb,new l.wb;function ke(){L.aspect=window.innerWidth/window.innerHeight,L.updateProjectionMatrix(),R.setSize(window.innerWidth,window.innerHeight)}function ze(){!function(){var e=1e-4*performance.now();H&&(H.position.y=1.9+.4*Math.sin(e),H.material.uniforms.time.value+=1/60);R.render(F,L);!1}(),je(),W.update(),a()(ze)}function Ae(e,t){for(var n=new Array(e.length/t),r=0;r<n.length;r++)n[r]=e.slice(r*t,r*t+t);return n}Promise.all([Object(c.a)("assets/tiles.glb"),Object(c.a)("assets/ground.glb"),Object(c.a)("assets/ms.glb"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,r){v.load(e,n,t,r)}))}("assets/waternormals.jpg")]).then((function(e){var t=T(e,4),n=(t[0],t[1]),r=t[2],a=t[3];!function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=t.type;if("Group"===r){console.log(n+"GROUP",t.name);for(var a=n+"    ",i=t.children,o=0;o<i.length;o++)e(i[o],a)}else"Mesh"===r&&console.log(n+"MESH",t.name)}(n.scene,"tiles: "),g.f.map((function(e){return n.scene.children.find((function(t){return t.name===e})).material})),function(e){for(var t=e.children,n=new Array(g.a.length),r=0;r<t.length;r++){var a=t[r],i=g.a.indexOf(a.name);i>=0&&(n[i]=a.geometry)}return n}(r.scene),a.wrapS=a.wrapT=l.gb,a,Pe(),ze()}))}]).default;
//# sourceMappingURL=bundle-main-7efa2a746cfcb5dc1476.js.map