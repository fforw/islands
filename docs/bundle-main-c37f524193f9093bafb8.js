var Demo=function(e){function t(t){for(var n,i,u=t[0],s=t[1],l=t[2],c=0,d=[];c<u.length;c++)i=u[c],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(f&&f(t);d.length;)d.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,u=1;u<r.length;u++){var s=r[u];0!==a[s]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={0:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var u=window.webpackJsonpDemo=window.webpackJsonpDemo||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var f=s;return o.push([30,2]),r()}({10:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return a.default}}),t.default=void 0;var n=o(r(20)),a=o(r(22));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=2*Math.PI/6;var v={width:0,height:0,numberOfRings:5,removeEdges:50,animatedEasing:!0,renderFirstPassEdges:!1,debug:!1,addQuads:!1,weightFunction:function(e,t,r,n){var a=r-e,o=n-t;return Math.sqrt(a*a+o*o)},edgeLength:80,maxIterations:100,animating:!0,minTension:2};function y(e,t,r,n,a,o,i){for(var u=0;u<e.length;u+=10)if(u!==o){var s=e[u+8];if(e[u+0]===n&&e[u+1]===a&&e[u+2]===t&&e[u+3]===r)return i.index=u,void(i.edge=0);if(e[u+2]===n&&e[u+3]===a&&e[u+4]===t&&e[u+5]===r)return i.index=u,void(i.edge=1);if(3===s){if(e[u+4]===n&&e[u+5]===a&&e[u+0]===t&&e[u+1]===r)return i.index=u,void(i.edge=2)}else{if(e[u+4]===n&&e[u+5]===a&&e[u+6]===t&&e[u+7]===r)return i.index=u,void(i.edge=2);if(e[u+6]===n&&e[u+7]===a&&e[u+0]===t&&e[u+1]===r)return i.index=u,void(i.edge=3)}}i.index=-1}var m={index:-1,edge:0};function b(e,t){var r=e.firstPassNumEdges*e.removeEdges/100|0,n=function(e,t){for(var r=3*e.numFaces,n=new Int32Array(r),a=0,o=0;o<e.firstPassLen;o+=10){if(!(t[o+9]>=0)){var i=o<<2;n[a++]=i,n[a++]=i+1,n[a++]=i+2}}for(var u=0;u<a-2;u++){var s=u+(Math.random()*a-u-1|0),l=n[u];n[u]=n[s],n[s]=l}return n.slice(0,a)}(e,t);e.debug&&console.log("Shuffled stack",c(n.slice()));for(var a=0,o=function(e){for(var t=a;t<n.length;t++)n[t]>>>2===e&&(n[t]=-1)},i=0,u=0;u<r;u++){var s=void 0;do{if(a===n.length)return void(e.debug&&e.debug&&console.log("Ran out of removal candidates after successfully removing",i,"out of",r));s=n[a++]}while(-1===s);var l=s>>2,f=3&s;if(y(t,t[l+2*f],t[l+2*f+1],2===f?t[l+0]:t[l+2*(f+1)],2===f?t[l+1]:t[l+2*(f+1)+1],l,m),m.index>=0&&3===t[m.index+8]){var d=m.index,h=m.edge,g=0===f?t[l+4]:t[l+2*(f-1)],v=0===f?t[l+5]:t[l+2*(f-1)+1],b=t[d+9]>=0;switch(t[d+8]=4,h){case 2:t[d+6]=g,t[d+7]=v;break;case 1:t[d+6]=t[d+4],t[d+7]=t[d+5],t[d+4]=g,t[d+5]=v;break;case 0:t[d+6]=t[d+4],t[d+7]=t[d+5],t[d+4]=t[d+2],t[d+5]=t[d+3],t[d+2]=g,t[d+3]=v,b&&(t[d+9]=2)}o(d),t[l+8]=0,i++}o(l)}return e.debug&&console.log("Successfully removed",i,"out of",r),i}function p(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=t.length,a=0;a<r;a++){for(var o=0,i=0;i<n;i+=10)if(!t[i+2]){for(var u=t[i+0],s=t[i+1],l=t[i+3],f=0,c=0,d=0,h=0;h<l;h++){var g=t[i+4+h],v=t[g],y=t[g+1],m=e.weightFunction(u,s,v,y);f+=v*m,c+=y*m,d+=m}var b=f/d,p=c/d,w=b-u,x=p-s;t[i+0]=b,t[i+1]=p,o+=w*w+x*x}if(o<e.minTension)return e.debug&&console.log("Reached minimal tension",e.minTension,"after",e.relaxCount,"iterations"),!0;e.relaxCount++}return e.animatedEasing||e.debug&&console.log("Stopping after max iterations = "+e.maxIterations),!1}var w=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.render=function(e){var t=r.config,n=r.graph,a=r.faces;e.save();var o=t.width/2,i=t.height/2;e.translate(o,i);var u=n.length;if(e.fillStyle="#000",e.fillRect(-o,-i,t.width,t.height),t.renderFirstPassEdges){e.strokeStyle="#f00",e.lineWidth=1;for(var s=0;s<t.firstPassLen;s+=10){var l=a[s+8];if(l>=3){e.beginPath(),e.moveTo(a[s+0],a[s+1]);for(var f=1;f<l;f++)e.lineTo(a[s+2*f],a[s+2*f+1]);e.closePath(),e.stroke();var c=a[s+9];c>=0&&(e.strokeStyle="#fe0",e.beginPath(),e.moveTo(a[s+2*c],a[s+2*c+1]),c===l-1?e.lineTo(a[s+0],a[s+1]):e.lineTo(a[s+2*(c+1)],a[s+2*(c+1)+1]),e.stroke(),e.strokeStyle="#f00")}}}function d(t,r,a){var o=n[a+0],i=n[a+1];e.beginPath(),e.moveTo(t,r),e.lineTo(o,i),e.stroke()}e.strokeStyle="#fff",e.lineWidth=1;for(var h=0;h<u;h+=10)for(var g=n[h+0],v=n[h+1],y=n[h+3],m=0;m<y;m++)d(g,v,n[h+4+m]);e.restore(),t.animating&&p(t,n)&&(t.animating=!1)};var o,u,l=s(s({},v),t);(o=l).numFaces=6*((u=o.numberOfRings)+1)*(u+1),o.firstPassLen=10*o.numFaces,o.firstPassNumEdges=3*o.numFaces,o.edgeLength=Math.min(o.width,o.height)/(2*o.numberOfRings+2)|0,o.animating=o.animatedEasing,o.relaxCount=0,this.config=l;var f=function(e){var t=e.numberOfRings,r=[new a.default(Math.cos(0)*e.edgeLength,Math.sin(0)*e.edgeLength),new a.default(Math.cos(g)*e.edgeLength,Math.sin(g)*e.edgeLength),new a.default(Math.cos(2*g)*e.edgeLength,Math.sin(2*g)*e.edgeLength),new a.default(Math.cos(3*g)*e.edgeLength,Math.sin(3*g)*e.edgeLength),new a.default(Math.cos(4*g)*e.edgeLength,Math.sin(4*g)*e.edgeLength),new a.default(Math.cos(5*g)*e.edgeLength,Math.sin(5*g)*e.edgeLength)],n=new Float64Array(e.firstPassLen),o=0,i=0,u=1;do{for(var s=0;s<6;s++)for(var l=r[s],f=r[(s+1)%6],c=r[(s+2)%6],d=l.copy().scale(i),h=0;h<u;h++)if(1&h)n[o+0]=0|d.x,n[o+1]=0|d.y,n[o+2]=d.x+f.x|0,n[o+3]=d.y+f.y|0,n[o+4]=d.x+c.x|0,n[o+5]=d.y+c.y|0,n[o+8]=3,n[o+9]=-1,o+=10,d.add(c);else{var v=i===t;n[o+0]=0|d.x,n[o+1]=0|d.y,n[o+2]=d.x+l.x|0,n[o+3]=d.y+l.y|0,n[o+4]=d.x+f.x|0,n[o+5]=d.y+f.y|0,n[o+8]=3,n[o+9]=v?1:-1,o+=10}u+=2}while(i++<t);return n}(l);l.renderFirstPassEdges&&(this.faces="merged"!==l.renderFirstPassEdges?f.slice():f);var c=l.debug&&(0,n.default)();b(l,f),l.debug&&console.log("Edge removal in ",(0,n.default)()-c,"ms");var d=i(function(e,t){for(var r=e.firstPassLen,n=e.addQuads,a=function(e,t){for(var r=0,n=0,a=0;a<e.firstPassLen;a+=10){var o=t[a+8];3===o?r++:4===o&&n++}return 9*n+7*r}(e,t),o=new Float64Array(10*a),i=n&&new Int32Array(4*a),u=0,s=0,l=function(e,t,r){e|=0,t|=0;for(var n=0;n<u;n+=10)if(Math.abs(o[n]-e)<2&&Math.abs(o[n+1]-t)<2)return r&&!o[n+2]&&(o[n+2]=1),n;var a=u;return o[u]=e,o[u+1]=t,o[u+2]=r?1:0,o[u+3]=0,o[u+4]=-1,o[u+5]=-1,o[u+6]=-1,o[u+7]=-1,u+=10,a},f=n&&function(e,t,r,n){i[s++]=e,i[s++]=t,i[s++]=r,i[s++]=n},c=function(e,t){for(var r=o[e+3],n=!1,a=0;a<r;a++){if(o[e+4+a]===t){n=!0;break}}if(!n){if(r>=10)throw new Error("At most 10 edges per node");o[e+4+r++]=t,o[e+3]=r}},d=function(e,t){c(e,t),c(t,e)},h=0;h<r;h+=10){var g=t[h+8];if(0!==g){var v=t[h+0],y=t[h+1],m=t[h+2],b=t[h+3],p=t[h+4],w=t[h+5],x=t[h+9],O=1===x,j=2===x;if(3===g){var P=(v+m)/2,S=(y+b)/2,E=(m+p)/2,M=(b+w)/2,k=(p+v)/2,T=(w+y)/2,L=(v+m+p)/3,A=(y+b+w)/3,I=l(v,y),F=l(P,S),_=l(m,b,O),C=l(E,M,O),R=l(p,w,O),D=l(k,T),q=l(L,A);d(I,F),d(F,q),d(q,D),d(D,I),d(F,_),d(_,C),d(C,q),d(q,F),d(D,q),d(q,C),d(C,R),d(R,D),n&&(f(I,F,q,D),f(F,_,C,q),f(D,q,C,R))}else{var Q=t[h+6],W=t[h+7],z=(v+m)/2,N=(y+b)/2,B=(m+p)/2,J=(b+w)/2,U=(p+Q)/2,$=(w+W)/2,G=(Q+v)/2,V=(W+y)/2,H=(v+m+p+Q)/4,K=(y+b+w+W)/4,X=l(v,y),Y=l(z,N),Z=l(m,b,O),ee=l(B,J,O),te=l(p,w,O||j),re=l(U,$,j),ne=l(Q,W,j),ae=l(G,V),oe=l(H,K);d(X,Y),d(Y,Z),d(Z,ee),d(ee,te),d(te,re),d(re,ne),d(ne,ae),d(ae,X),d(oe,ee),d(oe,re),d(oe,ae),d(oe,Y),n&&(f(X,Y,oe,ae),f(Y,Z,ee,oe),f(oe,ee,te,re),f(ae,oe,re,ne))}}}return[o.slice(0,u),i&&i.slice(0,s)]}(l,f),2),h=d[0],y=d[1];this.quads=y,l.animating||p(l,h,l.maxIterations),this.graph=h}var t,r,o;return t=e,(r=[{key:"nodeSize",get:function(){return 10}}])&&f(t.prototype,r),o&&f(t,o),e}();t.default=w},19:function(e,t,r){},22:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=Math.sqrt,o=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=r}var t,r,o;return t=e,(r=[{key:"copy",value:function(){return new e(this.x,this.y)}},{key:"add",value:function(e,t){return"number"==typeof e?(this.x+=e,this.y+=t):(this.x+=e.x,this.y+=e.y),this}},{key:"subtract",value:function(e,t){return"number"==typeof e?(this.x-=e,this.y-=t):(this.x-=e.x,this.y-=e.y),this}},{key:"scale",value:function(e){return this.x*=e,this.y*=e,this}},{key:"length",value:function(){var e=this.x,t=this.y;return a(e*e+t*t)}},{key:"norm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.scale(e/this.length())}},{key:"rotateClockwise",value:function(){var e=this.x,t=this.y;return this.x=t,this.y=-e,this}},{key:"rotateCounterClockwise",value:function(){var e=this.x,t=this.y;return this.x=-t,this.y=e,this}},{key:"set",value:function(e,t){"number"==typeof e?(this.x=e,this.y=t):(this.x=e.x,this.y=e.y)}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=o},30:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),o=r(9),i=r.n(o),u=(r(18),r(7)),s=r(3),l=(r(19),r(0)),f=r(5),c=r(10),d=r.n(c),h=new f.a,g=new l.TextureLoader;function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(){var e=Object(n.useMemo)((function(){for(var e=new d.a({numberOfRings:4,width:100,height:100,addQuads:!0}),t=e.quads,r=e.graph,n=t.length,o=new Float32Array(n/4),i=[],u=0;u<o.length;u++){var f=t[4*u],c=t[4*u+1],h=t[4*u+2],g=t[4*u+3],v=r[f+2]||r[c+2]||r[h+2]||r[g+2],y=(r[f],r[c],r[h],r[g],r[f+1],r[c+1],r[h+1],r[g+1],Math.random()),m=v?.5:y<.7?2:y<.98?10+Math.random():15;o[u]=m;var b=new l.Shape;b.moveTo(r[f],r[f+1]),b.lineTo(r[c],r[c+1]),b.lineTo(r[h],r[h+1]),b.lineTo(r[g],r[g+1]),b.lineTo(r[f],r[f+1]);var p=a.a.createElement("mesh",{key:u,rotateOnWorldAxis:!0,castShadow:!0,receiveShadow:!0},a.a.createElement(s.a,{attach:"geometry",args:[b,{steps:2,depth:m,bevelEnabled:!0,bevelThickness:.5,bevelSize:.5,bevelOffset:0,bevelSegments:2}]}),a.a.createElement(s.b,{attach:"material",roughness:.9,color:"#ffe6ee"}));i.push(p)}return console.log("INIT",{quads:t,height:o}),{organicQuads:e,height:o,boxes:i}}),[]),t=Object(n.useRef)();return Object(u.b)((function(){return t.current.rotation.z+=.01})),a.a.createElement("mesh",{ref:t,castShadow:!0,receiveShadow:!0},e.boxes,a.a.createElement("planeBufferGeometry",{attach:"geometry",args:[1e3,1e3,10,100,100,10]}),a.a.createElement(s.b,{attach:"material",roughness:.33,color:"#6687e8",normalMap:b}))}var b,p=function(){return a.a.createElement(u.a,{shadowMap:!0,camera:{position:[0,-50,75],fov:60}},a.a.createElement(m,null),a.a.createElement("directionalLight",{position:[0,0,1],intensity:.4,color:"#e6e8ff"}),a.a.createElement("spotLight",{intensity:1,position:[30,30,50],angle:.7,penumbra:1,castShadow:!0,color:"#fff9e6"}))};Promise.all([function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(r,n){h.load(e,r,t,n)}))}("assets/tiles.glb"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(r,n){g.load(e,r,t,n)}))}("assets/ocean-normals.png")]).then((function(e){var t=v(e,2),r=t[0],n=t[1];console.log("Scene Objects",r.scene.children.map((function(e){return e.name})).join(", ")),r.scene.children.find((function(e){return"Water"===e.name})).material,b=n,i.a.render(a.a.createElement(p,null),document.getElementById("root"))}))}});
//# sourceMappingURL=bundle-main-c37f524193f9093bafb8.js.map