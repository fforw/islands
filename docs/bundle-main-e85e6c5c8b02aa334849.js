var Demo=function(e){function t(t){for(var r,o,s=t[0],u=t[1],f=t[2],c=0,d=[];c<s.length;c++)o=s[c],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);d.length;)d.shift()();return i.push.apply(i,f||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==a[u]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={3:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window.webpackJsonpDemo=window.webpackJsonpDemo||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var f=0;f<s.length;f++)t(s[f]);var l=u;return i.push([39,0]),n()}({1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return a.default}}),t.default=t.t_size=t.t_tile3=t.t_tile2=t.t_tile1=t.t_tile0=t.t_isEdge=t.t_n3=t.t_n2=t.t_n1=t.t_n0=t.g_size=t.g_edge5=t.g_edge4=t.g_edge3=t.g_edge2=t.g_edge1=t.g_edge0=t.g_count=t.g_isEdge=t.g_y=t.g_x=t.f_size=t.f_outmostEdge=t.f_count=t.f_y3=t.f_x3=t.f_y2=t.f_x2=t.f_y1=t.f_x1=t.f_y0=t.f_x0=void 0;var r=i(n(19)),a=i(n(17));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.f_x0=0;t.f_y0=1;t.f_x1=2;t.f_y1=3;t.f_x2=4;t.f_y2=5;t.f_x3=6;t.f_y3=7;t.f_count=8;t.f_outmostEdge=9;t.f_size=10;t.g_x=0;t.g_y=1;t.g_isEdge=2;t.g_count=3;t.g_edge0=4;t.g_edge1=5;t.g_edge2=6;t.g_edge3=7;t.g_edge4=8;t.g_edge5=9;t.g_size=10;t.t_n0=0;t.t_n1=1;t.t_n2=2;t.t_n3=3;t.t_isEdge=4;t.t_tile0=5;t.t_tile1=6;t.t_tile2=7;t.t_tile3=8;t.t_size=9;var g=2*Math.PI/6;var h={width:0,height:0,numberOfRings:5,removeEdges:50,animatedEasing:!0,renderFirstPassEdges:!1,debug:!1,weightFunction:function(e,t,n,r){var a=n-e,i=r-t;return Math.sqrt(a*a+i*i)},edgeLength:80,maxIterations:100,animating:!0,minTension:2};function v(e,t,n,r,a,i,o){for(var s=0;s<e.length;s+=10)if(s!==i){var u=e[s+8];if(e[s+0]===r&&e[s+1]===a&&e[s+2]===t&&e[s+3]===n)return o.index=s,void(o.edge=0);if(e[s+2]===r&&e[s+3]===a&&e[s+4]===t&&e[s+5]===n)return o.index=s,void(o.edge=1);if(3===u){if(e[s+4]===r&&e[s+5]===a&&e[s+0]===t&&e[s+1]===n)return o.index=s,void(o.edge=2)}else{if(e[s+4]===r&&e[s+5]===a&&e[s+6]===t&&e[s+7]===n)return o.index=s,void(o.edge=2);if(e[s+6]===r&&e[s+7]===a&&e[s+0]===t&&e[s+1]===n)return o.index=s,void(o.edge=3)}}o.index=-1}var y={index:-1,edge:0};function p(e,t){var n=e.firstPassNumEdges*e.removeEdges/100|0,r=function(e,t){for(var n=3*e.numFaces,r=new Int32Array(n),a=0,i=0;i<e.firstPassLen;i+=10){if(!(t[i+9]>=0)){var o=i<<2;r[a++]=o,r[a++]=o+1,r[a++]=o+2}}for(var s=0;s<a-2;s++){var u=s+(Math.random()*a-s-1|0),f=r[s];r[s]=r[u],r[u]=f}return r.slice(0,a)}(e,t);e.debug&&console.log("Shuffled stack",l(r.slice()));for(var a=0,i=function(e){for(var t=a;t<r.length;t++)r[t]>>>2===e&&(r[t]=-1)},o=0,s=0;s<n;s++){var u=void 0;do{if(a===r.length)return void(e.debug&&e.debug&&console.log("Ran out of removal candidates after successfully removing",o,"out of",n));u=r[a++]}while(-1===u);var f=u>>2,c=3&u;if(v(t,t[f+2*c],t[f+2*c+1],2===c?t[f+0]:t[f+2*(c+1)],2===c?t[f+1]:t[f+2*(c+1)+1],f,y),y.index>=0&&3===t[y.index+8]){var d=y.index,g=y.edge,h=0===c?t[f+4]:t[f+2*(c-1)],p=0===c?t[f+5]:t[f+2*(c-1)+1],b=t[d+9]>=0;switch(t[d+8]=4,g){case 2:t[d+6]=h,t[d+7]=p;break;case 1:t[d+6]=t[d+4],t[d+7]=t[d+5],t[d+4]=h,t[d+5]=p;break;case 0:t[d+6]=t[d+4],t[d+7]=t[d+5],t[d+4]=t[d+2],t[d+5]=t[d+3],t[d+2]=h,t[d+3]=p,b&&(t[d+9]=2)}i(d),t[f+8]=0,o++}i(f)}return e.debug&&console.log("Successfully removed",o,"out of",n),o}function b(e,t){for(var n=e.firstPassLen,r=function(e,t){for(var n=0,r=0,a=0;a<e.firstPassLen;a+=10){var i=t[a+8];3===i?n++:4===i&&r++}return 9*r+7*n}(e,t),a=new Float64Array(10*r),i=new Int32Array(9*(r/2|0)),o=0,s=0,u=function(e,t,n){e|=0,t|=0;for(var r=0;r<o;r+=10)if(Math.abs(a[r]-e)<4&&Math.abs(a[r+1]-t)<4)return n&&!a[r+2]&&(a[r+2]=1),r;var i=o;return a[o+0]=e,a[o+1]=t,a[o+2]=n?1:0,a[o+3]=0,o+=10,i},f=function(e,t,n,r){i[s+0]=e,i[s+1]=t,i[s+2]=n,i[s+3]=r,s+=9},l=function(e,t){for(var n=a[e+3],r=!1,i=0;i<n;i++){if(a[e+4+i]===t){r=!0;break}}if(!r){if(n>=6)throw new Error("At most 6 edges per node");a[e+4+n++]=t,a[e+3]=n}},c=function(e,t){l(e,t),l(t,e)},d=0;d<n;d+=10){var g=t[d+8],h=t[d+0],v=t[d+1],y=t[d+2],p=t[d+3],b=t[d+4],m=t[d+5],_=t[d+9],w=1===_,x=2===_;if(3===g){var M=(h+y)/2,P=(v+p)/2,S=(y+b)/2,O=(p+m)/2,j=(b+h)/2,A=(m+v)/2,k=(h+y+b)/3,E=(v+p+m)/3,z=u(h,v),I=u(M,P),L=u(y,p,w),T=u(S,O,w),F=u(b,m,w),D=u(j,A),C=u(k,E);c(z,I),c(I,C),c(C,D),c(D,z),c(I,L),c(L,T),c(T,C),c(C,I),c(D,C),c(C,T),c(T,F),c(F,D),f(z,I,C,D),f(I,L,T,C),f(D,C,T,F)}else if(4===g){var R=t[d+6],W=t[d+7],H=(h+y)/2,q=(v+p)/2,G=(y+b)/2,N=(p+m)/2,U=(b+R)/2,J=(m+W)/2,B=(R+h)/2,$=(W+v)/2,V=(h+y+b+R)/4,K=(v+p+m+W)/4,Q=u(h,v),X=u(H,q),Y=u(y,p,w),Z=u(G,N,w),ee=u(b,m,w||x),te=u(U,J,x),ne=u(R,W,x),re=u(B,$),ae=u(V,K);c(Q,X),c(X,Y),c(Y,Z),c(Z,ee),c(ee,te),c(te,ne),c(ne,re),c(re,Q),c(ae,Z),c(ae,te),c(ae,re),c(ae,X),f(Q,X,ae,re),f(X,Y,Z,ae),f(ae,Z,ee,te),f(re,ae,te,ne)}}console.log("TILES: buffer = ",i.length,", used = "+s);var ie=i.slice(0,s);return function(e,t){for(var n=t.length,r=0;r<n;r+=9){for(var a=0,i=0;i<4;i++){for(var o=t[r+0+i],s=3===i?t[r+0]:t[r+0+i+1],u=-1,f=0;f<t.length;f+=9)if(f!==r){var l=t[f+0],c=t[f+1],d=t[f+2],g=t[f+3];if(c===o&&l===s||d===o&&c===s||g===o&&d===s||l===o&&g===s){u=f,a++;break}}t[r+5+i]=u}t[r+4]=4===a?0:1}e.debug&&console.log("TILE GRAPH",t)}(e,ie),[a.slice(0,o),ie]}function m(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t.length,a=0;a<n;a++){for(var i=0,o=0;o<r;o+=10)if(!t[o+2]){for(var s=t[o+0],u=t[o+1],f=t[o+3],l=0,c=0,d=0,g=0;g<f;g++){var h=t[o+4+g],v=t[h],y=t[h+1],p=e.weightFunction(s,u,v,y);l+=v*p,c+=y*p,d+=p}var b=l/d,m=c/d,_=b-s,w=m-u;t[o+0]=b,t[o+1]=m,i+=_*_+w*w}if(i<e.minTension)return e.debug&&console.log("Reached minimal tension",e.minTension,"after",e.relaxCount,"iterations"),!0;e.relaxCount++}return e.animatedEasing||e.debug&&console.log("Stopping after max iterations = "+e.maxIterations),!1}var _=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.render=function(e){var t=n.config,r=n.graph,a=n.faces;e.save();var i=t.width/2,o=t.height/2;e.translate(i,o);r.length;if(e.fillStyle="#000",e.fillRect(-i,-o,t.width,t.height),t.renderFirstPassEdges){e.strokeStyle="#f00",e.lineWidth=1;for(var s=0;s<t.firstPassLen;s+=10){var u=a[s+8];if(u>=3){e.beginPath(),e.moveTo(a[s+0],a[s+1]);for(var f=1;f<u;f++)e.lineTo(a[s+2*f],a[s+2*f+1]);e.closePath(),e.stroke();var l=a[s+9];l>=0&&(e.strokeStyle="#fe0",e.beginPath(),e.moveTo(a[s+2*l],a[s+2*l+1]),l===u-1?e.lineTo(a[s+0],a[s+1]):e.lineTo(a[s+2*(l+1)],a[s+2*(l+1)+1]),e.stroke(),e.strokeStyle="#f00")}}}e.restore(),t.animating&&m(t,r)&&(t.animating=!1)};var i,s,f=u(u({},h),t);(i=f).numFaces=6*((s=i.numberOfRings)+1)*(s+1),i.firstPassLen=10*i.numFaces,i.firstPassNumEdges=3*i.numFaces,i.edgeLength=Math.min(i.width,i.height)/(2*i.numberOfRings+2)|0,i.animating=i.animatedEasing,i.relaxCount=0,this.config=f;var l=function(e){var t=e.numberOfRings,n=[new a.default(Math.cos(0)*e.edgeLength,Math.sin(0)*e.edgeLength),new a.default(Math.cos(g)*e.edgeLength,Math.sin(g)*e.edgeLength),new a.default(Math.cos(2*g)*e.edgeLength,Math.sin(2*g)*e.edgeLength),new a.default(Math.cos(3*g)*e.edgeLength,Math.sin(3*g)*e.edgeLength),new a.default(Math.cos(4*g)*e.edgeLength,Math.sin(4*g)*e.edgeLength),new a.default(Math.cos(5*g)*e.edgeLength,Math.sin(5*g)*e.edgeLength)],r=new Float64Array(e.firstPassLen),i=0,o=0,s=1;do{for(var u=0;u<6;u++)for(var f=n[u],l=n[(u+1)%6],c=n[(u+2)%6],d=f.copy().scale(o),h=0;h<s;h++)if(1&h)r[i+0]=0|d.x,r[i+1]=0|d.y,r[i+2]=d.x+l.x|0,r[i+3]=d.y+l.y|0,r[i+4]=d.x+c.x|0,r[i+5]=d.y+c.y|0,r[i+8]=3,r[i+9]=-1,i+=10,d.add(c);else{var v=o===t;r[i+0]=0|d.x,r[i+1]=0|d.y,r[i+2]=d.x+f.x|0,r[i+3]=d.y+f.y|0,r[i+4]=d.x+l.x|0,r[i+5]=d.y+l.y|0,r[i+8]=3,r[i+9]=v?1:-1,i+=10}s+=2}while(o++<t);return r}(f);f.renderFirstPassEdges&&(this.faces="merged"!==f.renderFirstPassEdges?l.slice():l);var c=f.debug&&(0,r.default)();p(f,l),f.debug&&console.log("Edge removal in ",(0,r.default)()-c,"ms");var d=o(b(f,l),2),v=d[0],y=d[1];this.tiles=y,f.animating||m(f,v,f.maxIterations),this.graph=v};t.default=_},17:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=Math.sqrt,i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n}var t,n,i;return t=e,(n=[{key:"copy",value:function(){return new e(this.x,this.y)}},{key:"add",value:function(e,t){return"number"==typeof e?(this.x+=e,this.y+=t):(this.x+=e.x,this.y+=e.y),this}},{key:"subtract",value:function(e,t){return"number"==typeof e?(this.x-=e,this.y-=t):(this.x-=e.x,this.y-=e.y),this}},{key:"scale",value:function(e){return this.x*=e,this.y*=e,this}},{key:"length",value:function(){var e=this.x,t=this.y;return a(e*e+t*t)}},{key:"norm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.scale(e/this.length())}},{key:"rotateClockwise",value:function(){var e=this.x,t=this.y;return this.x=t,this.y=-e,this}},{key:"rotateCounterClockwise",value:function(){var e=this.x,t=this.y;return this.x=-t,this.y=e,this}},{key:"set",value:function(e,t){"number"==typeof e?(this.x=e,this.y=t):(this.x=e.x,this.y=e.y)}}])&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},2:function(e,t,n){"use strict";var r,a;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"l",(function(){return o})),n.d(t,"h",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return f})),n.d(t,"i",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"k",(function(){return d})),n.d(t,"f",(function(){return g})),n.d(t,"a",(function(){return h})),n.d(t,"e",(function(){return v})),n.d(t,"j",(function(){return y})),n.d(t,"g",(function(){return p}));var o=0,s=1,u=2,f=3,l=4,c=6,d=8,g=["Water","Sand","Grass","Forest","Stone","Ice","Dirt","Packed_Ice"],h=[null,"case-1","case-2","case-3","case-4","case-5-1","case-6","case-7","case-8","case-9","case-10-1","case-11","case-12","case-13","case-14","case-15","case-m1","case-m2","case-m3","case-m4","case-5-2","case-10-2"],v=(i(r={},o,[0,.4,.8]),i(r,s,[.8,.8,0]),i(r,u,[0,.7,0]),i(r,c,[.5,.3,.1]),i(r,f,[.2,.5,.3]),i(r,l,[.5,.5,.5]),i(r,5,[1,1,1]),i(r,7,[1,1,1]),i(r,d,[1,0,1]),r),y=(i(a={},o,0),i(a,s,1),i(a,u,1),i(a,c,1),i(a,f,1),i(a,l,.4),i(a,5,.9),i(a,7,.8),i(a,d,0),2*Math.PI),p=(1+Math.sqrt(5))/2},39:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n.n(r),i=n(21),o=n(22),s=n.n(o),u=(n(6),n(0)),f=n(1),l=n.n(f),c=n(5),d=n(23),g=n(10),h=n(13),v=new u.qb,y=n(9),p=n(2);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w,x,M,P,S,O,j,A,k,E,z;Math.PI;var I=10*Math.random(),L=10*Math.random();function T(e,t){var n=Math.sqrt(e*e+t*t),r=G.noise2D(7e-4*e,L+7e-4*t)<.1?0:.6,a=Object(y.a)(1-n/750,r);return Math.max(0,(75+75*(.99*G.noise2D(I+.003*e,.003*t)+G.noise2D(.07*t,.07*e)*(1-.99)+r))*a)}var F=new Float64Array(5);function D(){for(var e=z,t=(e.graph,e.tiles),n=t.length,r=7/f.t_size,a=[],i=new Set,o=0;o<n;o+=f.t_size){var s=o*r,u=t[o+f.t_tile0]*r,l=t[o+f.t_tile1]*r,c=t[o+f.t_tile2]*r,d=t[o+f.t_tile3]*r;F[0]=T(A[s],A[s+1]),F[1]=u>=0?T(A[u+0],A[u+1]):-1,F[2]=l>=0?T(A[l+0],A[l+1]):-1,F[3]=c>=0?T(A[c+0],A[c+1]):-1,F[4]=d>=0?T(A[d+0],A[d+1]):-1;var g=0;if(u>=0&&Math.abs(F[0]-F[1])>10&&(g|=1),l>=0&&Math.abs(F[0]-F[2])>10&&(g|=2),c>=0&&Math.abs(F[0]-F[3])>10&&(g|=4),d>=0&&Math.abs(F[0]-F[4])>10&&(g|=8),0!==g){for(var h=0;h<4;h++)if(g&1<<h){var v=h,y=3===h?0:h+1,b=t[o+f.t_n0+v]*Q,_=t[o+f.t_n0+y]*Q,w=F[0],x=t[o+f.t_n0+v],M=t[o+f.t_n0+y];i.add(x),i.add(M),A[s+3+v]=w,A[s+3+y]=w;var P=Math.random();P<.2?k[b+R]=p.i:P<.4&&(k[_+R]=p.i);var S=t[o+f.t_tile0+h];t[o+f.t_tile0+h]=-1;for(var O=-1,j=0;j<4;j++)if(t[S+f.t_tile0+j]===o&&-1===A[S*r+3+j]){O=o;break}-1!==O&&a.push(0,o,S,v,y)}for(var E=0;E<4;E++)if(!(g&1<<E)){var I=3===E?0:E+1,L=g&1<<(0===E?3:E-1),D=g&1<<I,C=t[o+f.t_tile0+E];(L||D)&&(L&&D?a.push(0,o,C,E,I):L?a.push(2,o,C,E,I):a.push(1,o,C,E,I))}}}var W,H=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=m(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,i=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw a}}}}(i);try{for(H.s();!(W=H.n()).done;)for(var q=W.value,G=0;G<n;G+=f.t_size)for(var N=0;N<4;N++){if(t[G+f.t_n0+N]===q){var U=G*r;-1===A[U+3+N]&&(A[U+3+N]=T(A[U+0],A[U+1]))}}}catch(e){H.e(e)}finally{H.f()}return a}var C,R=1;function W(){var e=z=new l.a({numberOfRings:15,width:1500,height:1500,graphUserData:1}),t=e.graph,n=(e.tiles,e.config,t.length),r=3/f.g_size;k=new Float64Array(n*r);for(var a=0,i=0;i<n;i+=f.g_size)k[a+0]=T(t[i+f.g_x],t[i+f.g_y]),k[a+R]=p.k,a+=3;A=new Float64Array(z.tiles.length/f.t_size*7),function(){for(var e=z,t=e.graph,n=e.tiles,r=n.length,a=0,i=0;i<r;i+=f.t_size){var o=n[i+f.t_n0],s=n[i+f.t_n1],u=n[i+f.t_n2],l=n[i+f.t_n3];A[a+0]=(t[o+f.g_x]+t[s+f.g_x]+t[u+f.g_x]+t[l+f.g_x])/4,A[a+1]=(t[o+f.g_y]+t[s+f.g_y]+t[u+f.g_y]+t[l+f.g_y])/4,A[a+2]=0,A[a+3]=-1,A[a+4]=-1,A[a+5]=-1,A[a+6]=-1,a+=7}}(),C=D(),console.log({tileCuts:ce(C,5)}),function(){var e=function(){for(var e=z.tiles,t=e.length,n=0;n<t;n+=f.t_size)if(e[n+f.t_isEdge])return n;throw new Error("No edge!?")}();console.log("Starting to walk at #",e/f.t_size);var t=new Set;!function e(t,n){if(t>=0&&!n.has(t)){n.add(t);var r=z.tiles;A[t*H+2]=1,e(r[t+f.t_tile0],n),e(r[t+f.t_tile1],n),e(r[t+f.t_tile2],n),e(r[t+f.t_tile3],n)}}(e,t)}(),function(){for(var e=z.graph,t=e.length,n=0,r=0,a=0;a<t;a+=f.g_size){var i=e[r+f.g_x],o=k[n+0],s=e[r+f.g_y];if(k[n+R]===p.k)if(o<2)k[n+R]=p.l;else if(o<5.7)k[n+R]=p.h;else{var u=G.noise2D(.005*i,.005*s);k[n+R]=o<60?u<.2?p.d:p.c:u<.2?p.c:p.d}n+=3,r+=f.g_size}}()}var H=7/f.t_size;var q=new i.a("TEST"),G=new s.a((function(){return q.next()}));var N,U,J=1e3,B=.1,$=.1;function V(){if(U){var e=Math.PI*(B-.5),t=2*Math.PI*($-.5);S.position.x=J*Math.cos(t),S.position.y=J*Math.sin(t)*Math.sin(e),S.position.z=J*Math.sin(t)*Math.cos(e),U.material.uniforms.sunPosition.value=S.position.copy(S.position),j&&j.material.uniforms.sunDirection.value.copy(S.position).normalize(),N.update(P,U)}}function K(){W(),w=document.getElementById("container"),(P=new u.Ab).setPixelRatio(window.devicePixelRatio),P.setSize(window.innerWidth,window.innerHeight),w.appendChild(P.domElement),M=new u.hb,(x=new u.U(55,window.innerWidth/window.innerHeight,1,2e4)).position.set(250,250,1e3),S=new u.k("#fff8d5",.8),M.add(S),N=new u.j(.2,1,512),M.background=N.renderTarget;var e=new u.W(3e4,3e4);(j=new d.a(e,{textureWidth:512,textureHeight:512,waterNormals:fe,alpha:.6,sunDirection:S.position.clone().normalize(),sunColor:"#fff8d5",waterColor:"#000e1e",distortionScale:2.5,clipBias:1e-4,fog:!0})).rotation.x=-Math.PI/2,M.add(j),U=new g.a,N.renderTarget.texture,V(),(O=new h.a(x,P.domElement)).maxPolarAngle=Math.PI,O.target.set(0,0,0),O.minDistance=0,O.maxDistance=1500,O.enableDamping=!0,O.dampingFactor=.02,O.update(),window.addEventListener("resize",se,!1),function(e){for(var t=new Map,n=0,r=[],a=[],i=[],o=function(e,o,s,u,f,l,c,d){var g=(e=Math.round(16*e)/16)+","+(o=Math.round(16*o)/16)+","+(s=Math.round(16*s)/16)+"/"+(u=Math.round(1024*u)/1024)+","+(f=Math.round(1024*f)/1024)+","+(l=Math.round(1024*l)/1024)+"/"+(c=Math.round(4096*c)/4096)+","+(d=Math.round(4096*d)/4096),h=t.get(g);if(void 0===h){var v=n++;return t.set(g,v),r.push(e,o,s),a.push(c,d),i.push(u,f,l),v}return h},s=new Array(7),l=p.l+1;l<7;l++){var c=oe(l,o,e);c.length&&(s[l]=c)}var d=z,g=d.graph,h=d.tiles,v=s[p.i];v||(v=s[p.i]=[]);for(var y=0;y<C.length;y+=5){for(var b=C[y+0],m=C[y+1],_=C[y+2],w=C[y+3],x=C[y+4],P=m*H,S=_*H,O=-1,j=-1,k=h[m+f.t_n0+w],I=h[m+f.t_n0+x],L=0;L<4;L++)if(h[_+f.t_n0+L]===k){if(O=L,-1!==j)break}else if(h[_+f.t_n0+L]===I&&(j=L,-1!==O))break;if(-1!==O&&-1!==j){var T=g[k+f.g_x],F=A[P+3+w],D=g[k+f.g_y],R=g[I+f.g_x],W=A[P+3+x],q=g[I+f.g_y],G=T,N=A[S+3+O],U=D,J=R,B=A[S+3+j],$=q;switch(b){case 0:var V=T-R,K=F-W,Q=D-q,X=J-R,Y=B-W,Z=$-q,ee=K*Z-Q*Y,te=Q*X-V*Z,ne=V*Y-K*X,re=o(T,F,D,ee,te,ne,0,0),ae=o(R,W,q,ee,te,ne,0,1),ie=o(J,B,$,ee,te,ne,1,1),se=o(G,N,U,ee,te,ne,1,0);v.push(ae,re,ie),v.push(ie,re,se);break;case 1:var ue=T-R,fe=F-W,le=D-q,ce=J-R,de=B-W,ge=$-q,he=fe*ge-le*de,ve=le*ce-ue*ge,ye=ue*de-fe*ce,pe=o(T,F,D,he,ve,ye,0,0),be=o(R,W,q,he,ve,ye,0,1),me=o(J,B,$,he,ve,ye,1,1);v.push(pe,be,me);break;case 2:var _e=T-G,we=F-N,xe=D-U,Me=J-G,Pe=B-N,Se=$-U,Oe=we*Se-xe*Pe,je=xe*Me-_e*Se,Ae=_e*Pe-we*Me,ke=o(T,F,D,Oe,je,Ae,0,0),Ee=o(J,B,$,Oe,je,Ae,1,1),ze=o(G,N,U,Oe,je,Ae,1,0);v.push(ke,Ee,ze)}}else console.log("No two cuts for",m,_,"=>",O,j)}var Ie=new u.g;Ie.setAttribute("position",new u.f(new Float32Array(r),3,!1)),Ie.setAttribute("normal",new u.f(new Float32Array(i),3,!1)),Ie.setAttribute("uv",new u.f(new Float32Array(a),2,!1));for(var Le=0,Te=[],Fe=[],De=0;De<s.length;De++){var Ce=s[De];if(Ce){Fe=Fe.concat(Ce);var Re=Ce.length;Ie.addGroup(Le,Re,Te.length),Te.push(E[De].clone()),Le+=Re}}Ie.setIndex(Fe);var We=new u.J(Ie,Te);M.add(We)}(le)}new u.S;var Q=3/f.g_size,X=new u.wb,Y=new u.wb,Z=new u.wb,ee=new u.wb,te=new u.wb,ne=new u.wb,re=new u.wb,ae=new u.wb,ie=new u.wb;function oe(e,t,n){for(var r=z,a=r.graph,i=r.tiles,o=i.length,s=[],u=0,l=0;l<o;l+=f.t_size){var c=i[l+f.t_n0],d=i[l+f.t_n1],g=i[l+f.t_n2],h=i[l+f.t_n3],v=c*Q,y=d*Q,b=g*Q,m=h*Q,_=a[c+f.g_x],w=-1===A[u+3]?k[v+0]:A[u+3],x=a[c+f.g_y],M=a[d+f.g_x],P=-1===A[u+4]?k[y+0]:A[u+4],S=a[d+f.g_y],O=a[g+f.g_x],j=-1===A[u+5]?k[b+0]:A[u+5],E=a[g+f.g_y],I=a[h+f.g_x],L=-1===A[u+6]?k[m+0]:A[u+6],T=a[h+f.g_y],F=_-M,D=w-P,C=x-S,W=O-M,H=j-P,q=E-S,G=I-M,N=L-P,U=T-S,J=(D*q-C*H+(D*U-C*N))/3,B=(C*W-F*q+(C*G-F*U)+1)/3,$=(F*H-D*W+(F*N-D*G))/3,V=1/Math.sqrt(J*J+B*B+$*$);J*=V,B*=V,$*=V;var K=k[v+R],oe=k[m+R],se=k[b+R],ue=k[y+R],fe=(K===e?1:0)+(oe===e?2:0)+(se===e?4:0)+(ue===e?8:0);if(0!==fe){1===fe&&oe!==ue?fe=16:2===fe&&se!==K?fe=17:4===fe&&ue!==oe?fe=18:8===fe&&K!==se&&(fe=19),5!==fe||K!==p.d&&K!==p.i||(fe=20),10!==fe||oe!==p.d&&oe!==p.i||(fe=21),X.set(_,w,x),Y.set(I-_,L-w,T-x),Z.set(O-M,j-P,E-S),ee.set(M-_,P-w,S-x);for(var le=n[fe],ce=le.getIndex().array,de=le.getAttribute("position").array,ge=le.getAttribute("uv").array,he=le.getAttribute("normal").array,ve=0;ve<ce.length;ve++){var ye=ce[ve],pe=3*ye,be=2*ye,me=1.01*(de[pe]+.5),_e=1.01*(de[pe+1]+.5),we=1.01*(de[pe+2]+.5),xe=he[pe],Me=he[pe+1],Pe=he[pe+2];te.copy(Y).multiplyScalar(me).add(X),ne.copy(Z).multiplyScalar(me).add(X).add(ee),ie.set(J,B,$).multiplyScalar(we),re.copy(ne).sub(te).multiplyScalar(_e).add(te).add(ie),te.copy(Y).multiplyScalar(me+xe).add(X),ne.copy(Z).multiplyScalar(me+xe).add(X).add(ee),ie.set(J,B,$).multiplyScalar(we+Pe),ae.copy(ne).sub(te).multiplyScalar(_e+Me).add(te).add(ie),ae.sub(re).normalize(),s.push(t(re.x,re.y,re.z,ae.x,ae.y,ae.z,ge[be],ge[be+1]))}}u+=7}return s}function se(){x.aspect=window.innerWidth/window.innerHeight,x.updateProjectionMatrix(),P.setSize(window.innerWidth,window.innerHeight)}function ue(){!function(){var e=1e-4*performance.now();j&&(j.position.y=1.9+.4*Math.sin(e),j.material.uniforms.time.value+=1/60);P.render(M,x);!1}(),V(),O.update(),a()(ue)}var fe,le;function ce(e,t){for(var n=new Array(e.length/t),r=0;r<n.length;r++)n[r]=e.slice(r*t,r*t+t);return n}Promise.all([Object(c.a)("assets/tiles.glb"),Object(c.a)("assets/ground.glb"),Object(c.a)("assets/ms.glb"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,r){v.load(e,n,t,r)}))}("assets/waternormals.jpg")]).then((function(e){var t=b(e,4),n=(t[0],t[1]),r=t[2],a=t[3];!function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=t.type;if("Group"===r){console.log(n+"GROUP",t.name);for(var a=n+"    ",i=t.children,o=0;o<i.length;o++)e(i[o],a)}else"Mesh"===r&&console.log(n+"MESH",t.name)}(n.scene,"tiles: "),E=p.f.map((function(e){return n.scene.children.find((function(t){return t.name===e})).material})),le=function(e){for(var t=e.children,n=new Array(p.a.length),r=0;r<t.length;r++){var a=t[r],i=p.a.indexOf(a.name);i>=0&&(n[i]=a.geometry)}return n}(r.scene),a.wrapS=a.wrapT=u.gb,fe=a,K(),ue()}))},5:function(e,t,n){"use strict";var r=new(n(8).a);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,a){r.load(e,n,t,a)}))}},6:function(e,t,n){},9:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=.05,r=n*n,a=t?.4:.6,i=t?.75:.5;if(e<n)return r-(e=n-e)*e;if(e<a){var o=a-n;return r+(e-=n)*e*(i-r)/(o*o)}var s=1-a;return 1-(e=1-e)*e*e*(1-i)/(s*s*s)}n.d(t,"a",(function(){return r}))}});
//# sourceMappingURL=bundle-main-e85e6c5c8b02aa334849.js.map