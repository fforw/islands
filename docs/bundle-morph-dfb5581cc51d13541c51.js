var App=function(e){function t(t){for(var r,o,s=t[0],u=t[1],c=t[2],l=0,h=[];l<s.length;l++)o=s[l],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(f&&f(t);h.length;)h.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={5:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window.webpackJsonpApp=window.webpackJsonpApp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var f=u;return a.push([47,0]),n()}({1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return i.default}}),t.default=t.t_size=t.t_tile3=t.t_tile2=t.t_tile1=t.t_tile0=t.t_isEdge=t.t_n3=t.t_n2=t.t_n1=t.t_n0=t.g_size=t.g_edge5=t.g_edge4=t.g_edge3=t.g_edge2=t.g_edge1=t.g_edge0=t.g_count=t.g_isEdge=t.g_y=t.g_x=t.f_size=t.f_outmostEdge=t.f_count=t.f_y3=t.f_x3=t.f_y2=t.f_x2=t.f_y1=t.f_x1=t.f_y0=t.f_x0=void 0;var r=a(n(29)),i=a(n(27));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.f_x0=0;t.f_y0=1;t.f_x1=2;t.f_y1=3;t.f_x2=4;t.f_y2=5;t.f_x3=6;t.f_y3=7;t.f_count=8;t.f_outmostEdge=9;t.f_size=10;t.g_x=0;t.g_y=1;t.g_isEdge=2;t.g_count=3;t.g_edge0=4;t.g_edge1=5;t.g_edge2=6;t.g_edge3=7;t.g_edge4=8;t.g_edge5=9;t.g_size=10;t.t_n0=0;t.t_n1=1;t.t_n2=2;t.t_n3=3;t.t_isEdge=4;t.t_tile0=5;t.t_tile1=6;t.t_tile2=7;t.t_tile3=8;t.t_size=9;var d=2*Math.PI/6;var g={width:0,height:0,numberOfRings:5,removeEdges:50,animatedEasing:!0,renderFirstPassEdges:!1,debug:!1,weightFunction:function(e,t,n,r){var i=n-e,a=r-t;return Math.sqrt(i*i+a*a)},edgeLength:80,maxIterations:100,animating:!0,minTension:2};function v(e,t,n,r,i,a,o){for(var s=0;s<e.length;s+=10)if(s!==a){var u=e[s+8];if(e[s+0]===r&&e[s+1]===i&&e[s+2]===t&&e[s+3]===n)return o.index=s,void(o.edge=0);if(e[s+2]===r&&e[s+3]===i&&e[s+4]===t&&e[s+5]===n)return o.index=s,void(o.edge=1);if(3===u){if(e[s+4]===r&&e[s+5]===i&&e[s+0]===t&&e[s+1]===n)return o.index=s,void(o.edge=2)}else{if(e[s+4]===r&&e[s+5]===i&&e[s+6]===t&&e[s+7]===n)return o.index=s,void(o.edge=2);if(e[s+6]===r&&e[s+7]===i&&e[s+0]===t&&e[s+1]===n)return o.index=s,void(o.edge=3)}}o.index=-1}var y={index:-1,edge:0};function p(e,t){var n=e.firstPassNumEdges*e.removeEdges/100|0,r=function(e,t){for(var n=3*e.numFaces,r=new Int32Array(n),i=0,a=0;a<e.firstPassLen;a+=10){if(!(t[a+9]>=0)){var o=a<<2;r[i++]=o,r[i++]=o+1,r[i++]=o+2}}for(var s=0;s<i-2;s++){var u=s+(Math.random()*i-s-1|0),c=r[s];r[s]=r[u],r[u]=c}return r.slice(0,i)}(e,t);e.debug&&console.log("Shuffled stack",f(r.slice()));for(var i=0,a=function(e){for(var t=i;t<r.length;t++)r[t]>>>2===e&&(r[t]=-1)},o=0,s=0;s<n;s++){var u=void 0;do{if(i===r.length)return void(e.debug&&e.debug&&console.log("Ran out of removal candidates after successfully removing",o,"out of",n));u=r[i++]}while(-1===u);var c=u>>2,l=3&u;if(v(t,t[c+2*l],t[c+2*l+1],2===l?t[c+0]:t[c+2*(l+1)],2===l?t[c+1]:t[c+2*(l+1)+1],c,y),y.index>=0&&3===t[y.index+8]){var h=y.index,d=y.edge,g=0===l?t[c+4]:t[c+2*(l-1)],p=0===l?t[c+5]:t[c+2*(l-1)+1],m=t[h+9]>=0;switch(t[h+8]=4,d){case 2:t[h+6]=g,t[h+7]=p;break;case 1:t[h+6]=t[h+4],t[h+7]=t[h+5],t[h+4]=g,t[h+5]=p;break;case 0:t[h+6]=t[h+4],t[h+7]=t[h+5],t[h+4]=t[h+2],t[h+5]=t[h+3],t[h+2]=g,t[h+3]=p,m&&(t[h+9]=2)}a(h),t[c+8]=0,o++}a(c)}return e.debug&&console.log("Successfully removed",o,"out of",n),o}function m(e,t){for(var n=e.firstPassLen,r=function(e,t){for(var n=0,r=0,i=0;i<e.firstPassLen;i+=10){var a=t[i+8];3===a?n++:4===a&&r++}return 9*r+7*n}(e,t),i=new Float64Array(10*r),a=new Int32Array(9*(r/2|0)),o=0,s=0,u=function(e,t,n){e|=0,t|=0;for(var r=0;r<o;r+=10)if(Math.abs(i[r]-e)<4&&Math.abs(i[r+1]-t)<4)return n&&!i[r+2]&&(i[r+2]=1),r;var a=o;return i[o+0]=e,i[o+1]=t,i[o+2]=n?1:0,i[o+3]=0,o+=10,a},c=function(e,t,n,r){a[s+0]=e,a[s+1]=t,a[s+2]=n,a[s+3]=r,s+=9},f=function(e,t){for(var n=i[e+3],r=!1,a=0;a<n;a++){if(i[e+4+a]===t){r=!0;break}}if(!r){if(n>=6)throw new Error("At most 6 edges per node");i[e+4+n++]=t,i[e+3]=n}},l=function(e,t){f(e,t),f(t,e)},h=0;h<n;h+=10){var d=t[h+8],g=t[h+0],v=t[h+1],y=t[h+2],p=t[h+3],m=t[h+4],b=t[h+5],w=t[h+9],_=1===w,x=2===w;if(3===d){var O=(g+y)/2,j=(v+p)/2,P=(y+m)/2,M=(p+b)/2,S=(m+g)/2,E=(b+v)/2,k=(g+y+m)/3,I=(v+p+b)/3,A=u(g,v),z=u(O,j),L=u(y,p,_),T=u(P,M,_),C=u(m,b,_),F=u(S,E),D=u(k,I);l(A,z),l(z,D),l(D,F),l(F,A),l(z,L),l(L,T),l(T,D),l(D,z),l(F,D),l(D,T),l(T,C),l(C,F),c(A,z,D,F),c(z,L,T,D),c(F,D,T,C)}else if(4===d){var G=t[h+6],R=t[h+7],H=(g+y)/2,W=(v+p)/2,N=(y+m)/2,U=(p+b)/2,q=(m+G)/2,J=(b+R)/2,X=(G+g)/2,Q=(R+v)/2,Y=(g+y+m+G)/4,$=(v+p+b+R)/4,B=u(g,v),V=u(H,W),Z=u(y,p,_),K=u(N,U,_),ee=u(m,b,_||x),te=u(q,J,x),ne=u(G,R,x),re=u(X,Q),ie=u(Y,$);l(B,V),l(V,Z),l(Z,K),l(K,ee),l(ee,te),l(te,ne),l(ne,re),l(re,B),l(ie,K),l(ie,te),l(ie,re),l(ie,V),c(B,V,ie,re),c(V,Z,K,ie),c(ie,K,ee,te),c(re,ie,te,ne)}}console.log("TILES: buffer = ",a.length,", used = "+s);var ae=a.slice(0,s);return function(e,t){for(var n=t.length,r=0;r<n;r+=9){for(var i=0,a=0;a<4;a++){for(var o=t[r+0+a],s=3===a?t[r+0]:t[r+0+a+1],u=-1,c=0;c<t.length;c+=9)if(c!==r){var f=t[c+0],l=t[c+1],h=t[c+2],d=t[c+3];if(l===o&&f===s||h===o&&l===s||d===o&&h===s||f===o&&d===s){u=c,i++;break}}t[r+5+a]=u}t[r+4]=4===i?0:1}e.debug&&console.log("TILE GRAPH",t)}(e,ae),[i.slice(0,o),ae]}function b(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t.length,i=0;i<n;i++){for(var a=0,o=0;o<r;o+=10)if(!t[o+2]){for(var s=t[o+0],u=t[o+1],c=t[o+3],f=0,l=0,h=0,d=0;d<c;d++){var g=t[o+4+d],v=t[g],y=t[g+1],p=e.weightFunction(s,u,v,y);f+=v*p,l+=y*p,h+=p}var m=f/h,b=l/h,w=m-s,_=b-u;t[o+0]=m,t[o+1]=b,a+=w*w+_*_}if(a<e.minTension)return e.debug&&console.log("Reached minimal tension",e.minTension,"after",e.relaxCount,"iterations"),!0;e.relaxCount++}return e.animatedEasing||e.debug&&console.log("Stopping after max iterations = "+e.maxIterations),!1}var w=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.render=function(e){var t=n.config,r=n.graph,i=n.faces;e.save();var a=t.width/2,o=t.height/2;e.translate(a,o);r.length;if(e.fillStyle="#000",e.fillRect(-a,-o,t.width,t.height),t.renderFirstPassEdges){e.strokeStyle="#f00",e.lineWidth=1;for(var s=0;s<t.firstPassLen;s+=10){var u=i[s+8];if(u>=3){e.beginPath(),e.moveTo(i[s+0],i[s+1]);for(var c=1;c<u;c++)e.lineTo(i[s+2*c],i[s+2*c+1]);e.closePath(),e.stroke();var f=i[s+9];f>=0&&(e.strokeStyle="#fe0",e.beginPath(),e.moveTo(i[s+2*f],i[s+2*f+1]),f===u-1?e.lineTo(i[s+0],i[s+1]):e.lineTo(i[s+2*(f+1)],i[s+2*(f+1)+1]),e.stroke(),e.strokeStyle="#f00")}}}e.restore(),t.animating&&b(t,r)&&(t.animating=!1)};var a,s,c=u(u({},g),t);(a=c).numFaces=6*((s=a.numberOfRings)+1)*(s+1),a.firstPassLen=10*a.numFaces,a.firstPassNumEdges=3*a.numFaces,a.edgeLength=Math.min(a.width,a.height)/(2*a.numberOfRings+2)|0,a.animating=a.animatedEasing,a.relaxCount=0,this.config=c;var f=function(e){var t=e.numberOfRings,n=[new i.default(Math.cos(0)*e.edgeLength,Math.sin(0)*e.edgeLength),new i.default(Math.cos(d)*e.edgeLength,Math.sin(d)*e.edgeLength),new i.default(Math.cos(2*d)*e.edgeLength,Math.sin(2*d)*e.edgeLength),new i.default(Math.cos(3*d)*e.edgeLength,Math.sin(3*d)*e.edgeLength),new i.default(Math.cos(4*d)*e.edgeLength,Math.sin(4*d)*e.edgeLength),new i.default(Math.cos(5*d)*e.edgeLength,Math.sin(5*d)*e.edgeLength)],r=new Float64Array(e.firstPassLen),a=0,o=0,s=1;do{for(var u=0;u<6;u++)for(var c=n[u],f=n[(u+1)%6],l=n[(u+2)%6],h=c.copy().scale(o),g=0;g<s;g++)if(1&g)r[a+0]=0|h.x,r[a+1]=0|h.y,r[a+2]=h.x+f.x|0,r[a+3]=h.y+f.y|0,r[a+4]=h.x+l.x|0,r[a+5]=h.y+l.y|0,r[a+8]=3,r[a+9]=-1,a+=10,h.add(l);else{var v=o===t;r[a+0]=0|h.x,r[a+1]=0|h.y,r[a+2]=h.x+c.x|0,r[a+3]=h.y+c.y|0,r[a+4]=h.x+f.x|0,r[a+5]=h.y+f.y|0,r[a+8]=3,r[a+9]=v?1:-1,a+=10}s+=2}while(o++<t);return r}(c);c.renderFirstPassEdges&&(this.faces="merged"!==c.renderFirstPassEdges?f.slice():f);var l=c.debug&&(0,r.default)();p(c,f),c.debug&&console.log("Edge removal in ",(0,r.default)()-l,"ms");var h=o(m(c,f),2),v=h[0],y=h[1];this.tiles=y,c.animating||b(c,v,c.maxIterations),this.graph=v};t.default=w},11:function(e,t,n){},21:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.type;if("Group"===n){console.log(t+"GROUP",e.name);for(var i=t+"    ",a=e.children,o=0;o<a.length;o++)r(a[o],i)}else"Mesh"===n&&console.log(t+"MESH",e.name)}n.d(t,"a",(function(){return r}))},27:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=Math.sqrt,a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n}var t,n,a;return t=e,(n=[{key:"copy",value:function(){return new e(this.x,this.y)}},{key:"add",value:function(e,t){return"number"==typeof e?(this.x+=e,this.y+=t):(this.x+=e.x,this.y+=e.y),this}},{key:"subtract",value:function(e,t){return"number"==typeof e?(this.x-=e,this.y-=t):(this.x-=e.x,this.y-=e.y),this}},{key:"scale",value:function(e){return this.x*=e,this.y*=e,this}},{key:"length",value:function(){var e=this.x,t=this.y;return i(e*e+t*t)}},{key:"norm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.scale(e/this.length())}},{key:"rotateClockwise",value:function(){var e=this.x,t=this.y;return this.x=t,this.y=-e,this}},{key:"rotateCounterClockwise",value:function(){var e=this.x,t=this.y;return this.x=-t,this.y=e,this}},{key:"set",value:function(e,t){"number"==typeof e?(this.x=e,this.y=t):(this.x=e.x,this.y=e.y)}}])&&r(t.prototype,n),a&&r(t,a),e}();t.default=a},3:function(e,t,n){"use strict";var r,i;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"l",(function(){return o})),n.d(t,"h",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"i",(function(){return f})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return h})),n.d(t,"k",(function(){return d})),n.d(t,"f",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"j",(function(){return y})),n.d(t,"g",(function(){return p}));var o=0,s=1,u=2,c=3,f=4,l=5,h=6,d=8,g=["Water","Sand","Grass","Forest","Stone","Ice","Dirt","Packed_Ice"],v=[null,"case-1","case-2","case-3","case-4","case-5-1","case-6","case-7","case-8","case-9","case-10-1","case-11","case-12","case-13","case-14","case-15","case-m1","case-m2","case-m3","case-m4","case-5-2","case-10-2"],y=(a(r={},o,[0,.4,.8]),a(r,s,[.8,.8,0]),a(r,u,[0,.7,0]),a(r,h,[.5,.3,.1]),a(r,c,[.2,.5,.3]),a(r,f,[.5,.5,.5]),a(r,l,[1,1,1]),a(r,7,[1,1,1]),a(r,d,[1,0,1]),a(i={},o,0),a(i,s,1),a(i,u,1),a(i,h,1),a(i,c,1),a(i,f,.4),a(i,l,.9),a(i,7,.8),a(i,d,0),2*Math.PI),p=(1+Math.sqrt(5))/2},47:function(e,t,n){"use strict";n.r(t);var r=n(12),i=n.n(r),a=(n(11),n(10)),o=n.n(a),s=n(0),u=n(1),c=n.n(u),f=n(7),l=n(13),h=n(14),d=n(3),g=n(21);n(44);!function(){var e,t,n,r=[],i={},a=0,o=0,u=0;function c(e,t){return e instanceof Float32Array?Math.floor(e[t]*a):e instanceof Float16Array?Math.floor(e[t]*o):e[t]}function f(e){var t=new s.f(new e.array.constructor(u*e.itemSize),e.itemSize),n=t.array,i=e.array;switch(e.itemSize){case 1:for(var a=0,o=r.length;a<o;a++)n[a]=i[r[a]];break;case 2:for(var c=0,f=r.length;c<f;c++){var l=2*r[c],h=2*c;n[h]=i[l],n[h+1]=i[l+1]}break;case 3:for(var d=0,g=r.length;d<g;d++){var v=3*r[d],y=3*d;n[y]=i[v],n[y+1]=i[v+1],n[y+2]=i[v+2]}break;case 4:for(var p=0,m=r.length;p<m;p++){var b=4*r[p],w=4*p;n[w]=i[b],n[w+1]=i[b+1],n[w+2]=i[b+2],n[w+3]=i[b+3]}}return t}function l(e,t){var n=e.array;switch(e.itemSize){case 1:return c(n,t);case 2:return c(n,t)+"_"+c(n,t+1);case 3:return c(n,t)+"_"+c(n,t+1)+"_"+c(n,t+2);case 4:return c(n,t)+"_"+c(n,t+1)+"_"+c(n,t+2)+"_"+c(n,t+3)}}function h(a,o){for(var s="",u=0,c=t.length;u<c;u++){var f=t[u],h=e.attributes[f];s+=l(h,h.itemSize*a*3+o*h.itemSize)+"_"}for(var d=0,g=n.length;d<g;d++){var v=n[d],y=e.morphAttributes[v];s+=l(y,y.itemSize*a*3+o*y.itemSize)+"_"}return void 0===i[s]&&(i[s]=r.length,r.push(3*a+o)),i[s]}function d(e,t,n,o){var s=Math.floor(e*a)+"_"+Math.floor(t*a)+"_"+Math.floor(n*a);return void 0===i[s]&&(i[s]=r.length,r.push(o)),i[s]}}();function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b={objects:[],attributeDefs:[],defaultCount:100,maxInstances:-1};new s.W;function w(e){return{name:e,itemSize:1,normalized:!1}}function _(e){return{name:e,itemSize:3,normalized:!1}}var x=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nameLookup=new Map,this.opts=null,this.instances=null,this.maxInstances=0,this.opts=y(y({},b),n),this.calculateMaxInstances(),this.importGeometries(t),this.instanceSize=1+this.maxGeomsPerInstance,this.instances=new Uint32Array(this.maxInstances*this.instanceSize),this.meshes=this.createMeshes(),console.log("Created InstancedMeshSet",this)}var t,n,r;return t=e,(n=[{key:"calculateMaxInstances",value:function(){for(var e=this.opts,t=e.objects,n=e.defaultCount,r=0,i=0;i<t.length;i++){var a=t[i].count;r+=void 0===a?n:a}this.maxInstances=r}},{key:"importGeometries",value:function(e){for(var t=this,n=this.opts,r=n.objects,i=n.defaultCount,a=1,o=0,s=function(n){var s=r[n],u=s.name,c=s.count,f=void 0===c?i:c,l=e.scene.children.find((function(e){return e.name===u}));if(!l)throw new Error("Could not find Object '"+u+"'");if(t.nameLookup.set(u,o),r[n].index=o,r[n].count=f,"Group"===l.type){var h=l.children.filter((function(e){return"Mesh"===e.type}));h.length>a&&(a=h.length),r[n].meshes=h,o+=h.length}else{if("Mesh"!==l.type)throw new Error("Invalid object type: "+JSON.stringify(l));r[n].meshes=[l],o++}},u=0;u<r.length;u++)s(u);this.maxGeomsPerInstance=a,this.numGeoms=o}},{key:"createMeshes",value:function(){for(var e=this.numGeoms,t=this.opts.objects,n=new Array(e),r=0;r<t.length;r++)for(var i=t[r],a=i.name,o=i.index,s=i.meshes,u=i.count,c=0;c<s.length;c++){var f=s[c],l=this.createInstancedMesh(f,u);l.name="InstancedMesh "+a+"#"+c,n[o+c]=l}return n}},{key:"createInstancedMesh",value:function(e,t){console.log("createInstancedMesh",e);var n=this.opts.attributeDefs,r=new s.t;s.g.prototype.copy.call(r,e.geometry);var i=0;n.forEach((function(e){i+=e.itemSize}));var a=i,o=new s.v(new Float32Array(t*a),a);return n.forEach((function(e){var t=e.name,n=e.itemSize,a=e.normalized;r.setAttribute(t,new s.w(o,n,i,a)),i+=n})),new s.u(r,e.material.clone(),t)}}])&&m(t.prototype,n),r&&m(t,r),e}();function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P,M,S,E,k,I,A,z,L,T,C,F,D=new s.kb;var G,R,H,W=1e3,N=.1,U=.1;function q(){if(R){var e=Math.PI*(N-.5),t=2*Math.PI*(U-.5);k.position.x=W*Math.cos(t),k.position.y=W*Math.sin(t)*Math.sin(e),k.position.z=W*Math.sin(t)*Math.cos(e),R.material.uniforms.sunPosition.value=k.position.copy(k.position),G.update(E,R)}}function J(){var e,t;e=C=new c.a({numberOfRings:1,width:1500,height:1500,graphUserData:1}),t=e.graph,e.tiles,e.config,t.length,P=document.getElementById("container"),(E=new s.Fb).setPixelRatio(window.devicePixelRatio),E.setSize(window.innerWidth,window.innerHeight),E.outputEncoding=s.Gb,P.appendChild(E.domElement),S=new s.mb,(M=new s.Z(55,window.innerWidth/window.innerHeight,1,2e4)).position.set(250,250,1e3),k=new s.l("#fff8d5",.8),S.add(k),G=new s.j(.2,1,512),S.background=G.renderTarget;var n=new s.bb(3e4,3e4);new s.N(n,A[d.e]).rotation.x=-Math.PI/2,R=new l.a,G.renderTarget.texture,q(),(I=new h.a(M,E.domElement)).maxPolarAngle=Math.PI,I.target.set(0,0,0),I.minDistance=0,I.maxDistance=1500,I.enableDamping=!0,I.dampingFactor=.02,I.update(),window.addEventListener("resize",X,!1),function(){var e=C,t=e.graph,n=e.tiles,r=n.length;z=new s.s,L=new s.Q({depthTest:!1,side:s.m,color:"#888",roughness:.7}),T=new s.Q({depthTest:!1,side:s.m,transparent:!0,opacity:.5,color:"#888",roughness:.7});for(var i=0;i<r;i+=u.t_size){var a=new s.g;a.name="Morph-Tiles";var o=[],c=[],f=n[i+u.t_n0],l=n[i+u.t_n1],h=n[i+u.t_n2],d=n[i+u.t_n3],g=t[f+u.g_x],v=t[f+u.g_y],y=t[l+u.g_x],p=t[l+u.g_y],m=t[h+u.g_x],b=t[h+u.g_y],w=t[d+u.g_x],_=t[d+u.g_y],x=(g+y+m+w)/4,O=(v+p+b+_)/4,j=x+.9*(g-x),P=O+.9*(v-O),M=x+.9*(y-x),E=O+.9*(p-O),k=x+.9*(m-x),I=O+.9*(b-O),A=x+.9*(w-x),F=O+.9*(_-O),D=j-M,G=P-E,R=k-M,H=I-E,W=A-M,N=F-E,U=(0*H-0*G+(0*N-0*G))/2,q=(G*R-D*H+(G*W-D*N))/2,J=(0*D-0*R+(0*D-0*W))/2,X=1/Math.sqrt(U*U+q*q+J*J);U*=X,q*=X,J*=X,o.push(j,0,P),o.push(A,0,F),o.push(M,0,E),o.push(M,0,E),o.push(A,0,F),o.push(k,0,I),c.push(U,q,J),c.push(U,q,J),c.push(U,q,J),c.push(U,q,J),c.push(U,q,J),c.push(U,q,J),a.setAttribute("position",new s.p(o,3)),a.setAttribute("normal",new s.p(c,3));var Q=new s.N(a,L);Q.position.set(0,0,0),z.add(Q)}S.add(z)}(),H=new x(F,{objects:[{name:"tree_plateau"}],defaultCount:100,attributeDefs:[_("pos"),_("up"),_("vX1"),_("vX2"),_("vY1"),w("stiff"),w("size")]}),console.log("MESH-SET",H)}function X(){M.aspect=window.innerWidth/window.innerHeight,M.updateProjectionMatrix(),E.setSize(window.innerWidth,window.innerHeight)}var Q=null;var Y,$=new s.Ab(100,0);function B(e){e.preventDefault(),$.x=e.clientX/window.innerWidth*2-1,$.y=-e.clientY/window.innerHeight*2+1}Promise.all([Object(f.a)("assets/tiles.glb"),Object(f.a)("assets/ground.glb")]).then((function(e){var t=O(e,2),n=t[0],r=t[1];Y=o()(),F=n,Object(g.a)(F.scene,"tiles: "),A=d.f.map((function(e){return r.scene.children.find((function(t){return t.name===e})).material})),J();var i=o()();console.log("Total: ",i-Y,"ms"),D.setFromCamera($,M),document.addEventListener("mousemove",B,!1)})).then((function e(){D.setFromCamera($,M);var t=D.intersectObjects(z.children);t.length>0?Q!==t[0].object&&(null!==Q&&(Q.material=L),(Q=t[0].object).material=T):(!1,null!==Q&&(Q.material=L,Q=null)),function(){performance.now();E.render(S,M);!1}(),q(),I.update(),i()(e)}))},7:function(e,t,n){"use strict";var r=new(n(19).a);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,i){r.load(e,n,t,i)}))}}}).default;
//# sourceMappingURL=bundle-morph-dfb5581cc51d13541c51.js.map